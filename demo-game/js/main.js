!function(t){!function(){"use strict";var e,n=window,r=n.document,i=n.navigator,o=r.documentElement,s=!1;e={isNormal:s,link:{ios:{normal:"",pro:""},android:{normal:"",pro:""}},ls:n.localStorage,savedItem:"tangram-2",attr:{},systemAttr:{},defaultLanguage:"en",availableLanguages:["en"],init:function(){var t=this;t.attr=JSON.parse(t.ls.getItem(t.savedItem)||"{}"),t.setLanguage(),t.set("isPhone",Math.max(o.clientHeight,o.clientWidth)<=736,!0),t.set("isTouch","ontouchstart"in r,!0),t.setOS(),t.detectCssJsPrefix(),t.detectTransitionEndEventName(),t.detectAnimationEventNames(),t.setSettings()},setLanguage:function(){var t,e=this;t=e.get("language")||i.language||i.userLanguage||e.defaultLanguage,t=t.split("-")[0].toLowerCase(),t=-1===e.availableLanguages.indexOf(t)?e.defaultLanguage:t,e.set("language",t)},setOS:function(){var t=this,e=i.userAgent,n=/MSIE/.test(e),r=/android/i.test(e),o=/iPad|iPhone|iPod/.test(e);t.set("isIE",n,!0),t.set("isAndroid",r,!0),t.set("isIOS",o,!0),n&&t.set("os","wp",!0),r&&(t.set("os","android",!0),t.set("android-version",t.getAndroidVersion(),!0)),o&&t.set("os","ios",!0),t.get("os",!0)||(t.set("os","ios",!0),t.set("isIOS",!0,!0))},getAndroidVersion:function(){var t=i.userAgent.toLowerCase().match(/android\s([0-9\.]*)/);return t&&t[1]},detectCssJsPrefix:function(){var t={js:"",css:""},e=r.createElement("div").style,n=["t","webkitT","MozT","msT","OT"];n.forEach(function(n){var r=n+"ransform";e.hasOwnProperty(r)&&(n=n.replace(/t$/i,""),t.js=n,n=n.toLowerCase(),n&&(t.css="-"+n+"-"))}),this.set("cssJsPrefix",t,!0)},detectTransitionEndEventName:function(){void 0===r.createElement("div").style.WebkitTransition?this.set("transitionEnd","transitionend",!0):this.set("transitionEnd","webkitTransitionEnd",!0)},detectAnimationEventNames:function(){void 0===r.createElement("div").style.WebkitAnimation?(this.set("animationEnd","animationend",!0),this.set("animationStart","animationstart",!0),this.set("animationIteration","animationiteration",!0)):(this.set("animationEnd","webkitAnimationEnd",!0),this.set("animationStart","webkitAnimationStart",!0),this.set("animationIteration","webkitAnimationIteration",!0))},set:function(t,e,n){return n?this.systemAttr[t]=e:(this.attr[t]=e,this.ls.setItem(this.savedItem,JSON.stringify(this.attr))),t},get:function(t,e){return e?this.systemAttr[t]:this.attr[t]},remove:function(t,e){return e?(this.systemAttr[t]=null,delete this.systemAttr[t]):(this.attr[t]=null,delete this.attr[t],this.ls.setItem(this.savedItem,JSON.stringify(this.attr))),t},setSettings:function(){var t,e,n=this,r={screenAnimation:"on",installTime:Date.now(),tangramTexture:0,gameDifficult:"regular",doneTangramsRegular:[],doneTangramsMaster:[]};for(t in r)r.hasOwnProperty(t)&&(e=n.get(t)||r[t],n.set(t,e))},hintIsDone:function(t){var e=this,n=e.get("hint")[t];return Boolean(n&&"done"===n.state)},getLinkToStore:function(t){return this.link[this.get("os",!0)][t||"normal"]},getDoneTangrams:function(){var t=this,e=t.get("gameDifficult");return"regular"===e?t.get("doneTangramsRegular"):t.get("doneTangramsMaster")},pushToDoneTangrams:function(t){var e,n,r=this,i=r.get("gameDifficult");e="regular"===i?"doneTangramsRegular":"doneTangramsMaster",n=r.get(e),n.push(t),r.set(e,n)}},e.init(),t["/www/js/services/info.js"]=e}(),function(){"use strict";var e,n,r=t["/www/js/services/info.js"]||window.info,i=Array.prototype.slice,o={isEnable:r.get("dev-mode"),remoteLog:!1,xhr:new XMLHttpRequest,log:function(){console.log.apply(console,arguments)},sendToServer:function(){if(this.remoteLog){var t=this,e=t.xhr,n=i.call(arguments).map(function(t){return t&&"object"==typeof t?JSON.stringify(t):String(t)}).join(" ");e.open("POST","/log/",!1),e.send(n)}}};e=o.isEnable?function(){return o.sendToServer.apply(o,arguments),o.log.apply(o,arguments)}:function(){},n=window.onerror,window.onerror=function(t,r,i){return e.apply(null,arguments),n?n(t,r,i):void 0},t["/www/js/services/log.js"]=e}(),function(){"use strict";function e(t,e){var n=i.channels;return n[t]||(n[t]=[]),n[t].push({context:this,callback:e}),this}function n(t){var e,n=i.channels[t];return o("publish -",t,arguments),n?(e=Array.prototype.slice.call(arguments,1),n.forEach(function(t){t.callback.apply(t.context,e)}),this):this}function r(t){var e,n=i.channels;if(!t){for(e in n)n.hasOwnProperty(e)&&this.unsubscribe(e);return this}return n[t]?(n[t]=n[t].filter(function(t){return t.context!==this},this),this):this}var i,o=t["/www/js/services/log.js"]||window.log;i={channels:{},publish:n,subscribe:e,unsubscribe:r,installTo:function(t){t.subscribe=e,t.publish=n,t.unsubscribe=r},uninstallFrom:function(t){["subscribe","publish","unsubscribe"].forEach(function(e){t[e]=null,delete t[e]})}},t["/www/js/services/mediator.js"]=i}(),function(){"document"in self&&("classList"in document.createElement("_")?!function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,r=arguments.length;for(n=0;r>n;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}():!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",r=t.Element[n],i=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},u=function(t,e){if(""===e)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(t,e)},c=function(t){for(var e=o.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],r=0,i=n.length;i>r;r++)this.push(n[r]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},l=c[n]=[],h=function(){return new c(this)};if(a[n]=Error[n],l.item=function(t){return this[t]||null},l.contains=function(t){return t+="",-1!==u(this,t)},l.add=function(){var t,e=arguments,n=0,r=e.length,i=!1;do t=e[n]+"",-1===u(this,t)&&(this.push(t),i=!0);while(++n<r);i&&this._updateClassName()},l.remove=function(){var t,e,n=arguments,r=0,i=n.length,o=!1;do for(t=n[r]+"",e=u(this,t);-1!==e;)this.splice(e,1),o=!0,e=u(this,t);while(++r<i);o&&this._updateClassName()},l.toggle=function(t,e){t+="";var n=this.contains(t),r=n?e!==!0&&"remove":e!==!1&&"add";return r&&this[r](t),e===!0||e===!1?e:!n},l.toString=function(){return this.join(" ")},i.defineProperty){var f={get:h,enumerable:!0,configurable:!0};try{i.defineProperty(r,e,f)}catch(d){-2146823252===d.number&&(f.enumerable=!1,i.defineProperty(r,e,f))}}else i[n].__defineGetter__&&r.__defineGetter__(e,h)}}(self))}(),function(){if(Function.prototype.bind||(Function.prototype.bind=function(t){"use strict";if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),function(){"use strict";var t=Object.prototype,e=t.__defineGetter__,n=t.__defineSetter__,r=t.__lookupGetter__,i=t.__lookupSetter__,o=t.hasOwnProperty;e&&n&&r&&i&&(Object.defineProperty||(Object.defineProperty=function(t,s,a){if(arguments.length<3)throw new TypeError("Arguments not optional");if(s+="",o.call(a,"value")&&(r.call(t,s)||i.call(t,s)||(t[s]=a.value),o.call(a,"get")||o.call(a,"set")))throw new TypeError("Cannot specify an accessor and a value");if(!(a.writable&&a.enumerable&&a.configurable))throw new TypeError("This implementation of Object.defineProperty does not support false for configurable, enumerable, or writable.");return a.get&&e.call(t,s,a.get),a.set&&n.call(t,s,a.set),t}),Object.getOwnPropertyDescriptor||(Object.getOwnPropertyDescriptor=function(t,e){if(arguments.length<2)throw new TypeError("Arguments not optional.");e+="";var n={configurable:!0,enumerable:!0,writable:!0},s=r.call(t,e),a=i.call(t,e);return o.call(t,e)?s||a?(delete n.writable,n.get=n.set=void 0,s&&(n.get=s),a&&(n.set=a),n):(n.value=t[e],n):n}),Object.defineProperties||(Object.defineProperties=function(t,e){var n;for(n in e)o.call(e,n)&&Object.defineProperty(t,n,e[n])}))}(),!(document.documentElement.dataset||Object.getOwnPropertyDescriptor(Element.prototype,"dataset")&&Object.getOwnPropertyDescriptor(Element.prototype,"dataset").get)){var t={enumerable:!0,get:function(){"use strict";var t,e,n,r,i,o,s=this,a=this.attributes,u=a.length,c=function(t){return t.charAt(1).toUpperCase()},l=function(){return this},h=function(t,e){return"undefined"!=typeof e?this.setAttribute(t,e):this.removeAttribute(t)};try{({}).__defineGetter__("test",function(){}),e={}}catch(f){e=document.createElement("div")}for(t=0;u>t;t++)if(o=a[t],o&&o.name&&/^data-\w[\w\-]*$/.test(o.name)){n=o.value,r=o.name,i=r.substr(5).replace(/-./g,c);try{Object.defineProperty(e,i,{enumerable:this.enumerable,get:l.bind(n||""),set:h.bind(s,r)})}catch(d){e[i]=n}}return e}};try{Object.defineProperty(Element.prototype,"dataset",t)}catch(e){t.enumerable=!1,Object.defineProperty(Element.prototype,"dataset",t)}}}(),function(){!function(t,e){"use strict";"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.returnExports=e()}(this,function(){var t,e=Array,n=e.prototype,r=Object,i=r.prototype,o=Function.prototype,s=String,a=s.prototype,u=Number,c=u.prototype,l=n.slice,h=n.splice,f=n.push,d=n.unshift,p=n.concat,g=o.call,v=o.apply,w=Math.max,m=Math.min,y=i.toString,b="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,j=Function.prototype.toString,E=function(t){try{return j.call(t),!0}catch(e){return!1}},x="[object Function]",_="[object GeneratorFunction]";t=function(t){if("function"!=typeof t)return!1;if(b)return E(t);var e=y.call(t);return e===x||e===_};var T,S=RegExp.prototype.exec,O=function(t){try{return S.call(t),!0}catch(e){return!1}},k="[object RegExp]";T=function(t){return"object"!=typeof t?!1:b?O(t):y.call(t)===k};var A,C=String.prototype.valueOf,P=function(t){try{return C.call(t),!0}catch(e){return!1}},I="[object String]";A=function(t){return"string"==typeof t?!0:"object"!=typeof t?!1:b?P(t):y.call(t)===I};var L=r.defineProperty&&function(){try{var t={};r.defineProperty(t,"x",{enumerable:!1,value:t});for(var e in t)return!1;return t.x===t}catch(n){return!1}}(),M=function(t){var e;return e=L?function(t,e,n,i){!i&&e in t||r.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(t,e,n,r){!r&&e in t||(t[e]=n)},function(n,r,i){for(var o in r)t.call(r,o)&&e(n,o,r[o],i)}}(i.hasOwnProperty),D=function(t){var e=typeof t;return null===t||"object"!==e&&"function"!==e},N=u.isNaN||function(t){return t!==t},$={ToInteger:function(t){var e=+t;return N(e)?e=0:0!==e&&e!==1/0&&e!==-(1/0)&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e},ToPrimitive:function(e){var n,r,i;if(D(e))return e;if(r=e.valueOf,t(r)&&(n=r.call(e),D(n)))return n;if(i=e.toString,t(i)&&(n=i.call(e),D(n)))return n;throw new TypeError},ToObject:function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return r(t)},ToUint32:function(t){return t>>>0}},R=function(){};M(o,{bind:function(e){var n=this;if(!t(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var i,o=l.call(arguments,1),s=function(){if(this instanceof i){var t=n.apply(this,p.call(o,l.call(arguments)));return r(t)===t?t:this}return n.apply(e,p.call(o,l.call(arguments)))},a=w(0,n.length-o.length),u=[],c=0;a>c;c++)f.call(u,"$"+c);return i=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this, arguments); }")(s),n.prototype&&(R.prototype=n.prototype,i.prototype=new R,R.prototype=null),i}});var F=g.bind(i.hasOwnProperty),H=g.bind(i.toString),U=g.bind(l),B=v.bind(l),z=g.bind(a.slice),q=g.bind(a.split),J=g.bind(a.indexOf),W=g.bind(f),V=g.bind(i.propertyIsEnumerable),X=g.bind(n.sort),Y=e.isArray||function(t){return"[object Array]"===H(t)},G=1!==[].unshift(0);M(n,{unshift:function(){return d.apply(this,arguments),this.length}},G),M(e,{isArray:Y});var Z=r("a"),Q="a"!==Z[0]||!(0 in Z),K=function(t){var e=!0,n=!0;return t&&(t.call("foo",function(t,n,r){"object"!=typeof r&&(e=!1)}),t.call([1],function(){"use strict";n="string"==typeof this},"x")),!!t&&e&&n};M(n,{forEach:function(e){var n,r=$.ToObject(this),i=Q&&A(this)?q(this,""):r,o=-1,s=$.ToUint32(i.length);if(arguments.length>1&&(n=arguments[1]),!t(e))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++o<s;)o in i&&("undefined"==typeof n?e(i[o],o,r):e.call(n,i[o],o,r))}},!K(n.forEach)),M(n,{map:function(n){var r,i=$.ToObject(this),o=Q&&A(this)?q(this,""):i,s=$.ToUint32(o.length),a=e(s);if(arguments.length>1&&(r=arguments[1]),!t(n))throw new TypeError("Array.prototype.map callback must be a function");for(var u=0;s>u;u++)u in o&&("undefined"==typeof r?a[u]=n(o[u],u,i):a[u]=n.call(r,o[u],u,i));return a}},!K(n.map)),M(n,{filter:function(e){var n,r,i=$.ToObject(this),o=Q&&A(this)?q(this,""):i,s=$.ToUint32(o.length),a=[];if(arguments.length>1&&(r=arguments[1]),!t(e))throw new TypeError("Array.prototype.filter callback must be a function");for(var u=0;s>u;u++)u in o&&(n=o[u],("undefined"==typeof r?e(n,u,i):e.call(r,n,u,i))&&W(a,n));return a}},!K(n.filter)),M(n,{every:function(e){var n,r=$.ToObject(this),i=Q&&A(this)?q(this,""):r,o=$.ToUint32(i.length);if(arguments.length>1&&(n=arguments[1]),!t(e))throw new TypeError("Array.prototype.every callback must be a function");for(var s=0;o>s;s++)if(s in i&&!("undefined"==typeof n?e(i[s],s,r):e.call(n,i[s],s,r)))return!1;return!0}},!K(n.every)),M(n,{some:function(e){var n,r=$.ToObject(this),i=Q&&A(this)?q(this,""):r,o=$.ToUint32(i.length);if(arguments.length>1&&(n=arguments[1]),!t(e))throw new TypeError("Array.prototype.some callback must be a function");for(var s=0;o>s;s++)if(s in i&&("undefined"==typeof n?e(i[s],s,r):e.call(n,i[s],s,r)))return!0;return!1}},!K(n.some));var tt=!1;n.reduce&&(tt="object"==typeof n.reduce.call("es5",function(t,e,n,r){return r})),M(n,{reduce:function(e){var n=$.ToObject(this),r=Q&&A(this)?q(this,""):n,i=$.ToUint32(r.length);if(!t(e))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===i&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,s=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(s in r){o=r[s++];break}if(++s>=i)throw new TypeError("reduce of empty array with no initial value")}for(;i>s;s++)s in r&&(o=e(o,r[s],s,n));return o}},!tt);var et=!1;n.reduceRight&&(et="object"==typeof n.reduceRight.call("es5",function(t,e,n,r){return r})),M(n,{reduceRight:function(e){var n=$.ToObject(this),r=Q&&A(this)?q(this,""):n,i=$.ToUint32(r.length);if(!t(e))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===i&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var o,s=i-1;if(arguments.length>=2)o=arguments[1];else for(;;){if(s in r){o=r[s--];break}if(--s<0)throw new TypeError("reduceRight of empty array with no initial value")}if(0>s)return o;do s in r&&(o=e(o,r[s],s,n));while(s--);return o}},!et);var nt=n.indexOf&&-1!==[0,1].indexOf(1,2);M(n,{indexOf:function(t){var e=Q&&A(this)?q(this,""):$.ToObject(this),n=$.ToUint32(e.length);if(0===n)return-1;var r=0;for(arguments.length>1&&(r=$.ToInteger(arguments[1])),r=r>=0?r:w(0,n+r);n>r;r++)if(r in e&&e[r]===t)return r;return-1}},nt);var rt=n.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);M(n,{lastIndexOf:function(t){var e=Q&&A(this)?q(this,""):$.ToObject(this),n=$.ToUint32(e.length);if(0===n)return-1;var r=n-1;for(arguments.length>1&&(r=m(r,$.ToInteger(arguments[1]))),r=r>=0?r:n-Math.abs(r);r>=0;r--)if(r in e&&t===e[r])return r;return-1}},rt);var it=function(){var t=[1,2],e=t.splice();return 2===t.length&&Y(e)&&0===e.length}();M(n,{splice:function(t,e){return 0===arguments.length?[]:h.apply(this,arguments)}},!it);var ot=function(){var t={};return n.splice.call(t,0,0,1),1===t.length}();M(n,{splice:function(t,e){if(0===arguments.length)return[];var n=arguments;return this.length=w($.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof e&&(n=U(arguments),n.length<2?W(n,this.length-t):n[1]=$.ToInteger(e)),h.apply(this,n)}},!ot);var st=function(){var t=new e(1e5);return t[8]="x",t.splice(1,1),7===t.indexOf("x")}(),at=function(){var t=256,e=[];return e[t]="a",e.splice(t+1,0,"b"),"a"===e[t]}();M(n,{splice:function(t,e){for(var n,r=$.ToObject(this),i=[],o=$.ToUint32(r.length),a=$.ToInteger(t),u=0>a?w(o+a,0):m(a,o),c=m(w($.ToInteger(e),0),o-u),l=0;c>l;)n=s(u+l),F(r,n)&&(i[l]=r[n]),l+=1;var h,f=U(arguments,2),d=f.length;if(c>d){for(l=u;o-c>l;)n=s(l+c),h=s(l+d),F(r,n)?r[h]=r[n]:delete r[h],l+=1;for(l=o;l>o-c+d;)delete r[l-1],l-=1}else if(d>c)for(l=o-c;l>u;)n=s(l+c-1),h=s(l+d-1),F(r,n)?r[h]=r[n]:delete r[h],l-=1;l=u;for(var p=0;p<f.length;++p)r[l]=f[p],l+=1;return r.length=o-c+d,i}},!st||!at);var ut,ct=n.join;try{ut="1,2,3"!==Array.prototype.join.call("123",",")}catch(lt){ut=!0}ut&&M(n,{join:function(t){var e="undefined"==typeof t?",":t;return ct.call(A(this)?q(this,""):this,e)}},ut);var ht="1,2"!==[1,2].join(void 0);ht&&M(n,{join:function(t){var e="undefined"==typeof t?",":t;return ct.call(this,e)}},ht);var ft=function(t){for(var e=$.ToObject(this),n=$.ToUint32(e.length),r=0;r<arguments.length;)e[n+r]=arguments[r],r+=1;return e.length=n+r,n+r},dt=function(){var t={},e=Array.prototype.push.call(t,void 0);return 1!==e||1!==t.length||"undefined"!=typeof t[0]||!F(t,0)}();M(n,{push:function(t){return Y(this)?f.apply(this,arguments):ft.apply(this,arguments)}},dt);var pt=function(){var t=[],e=t.push(void 0);return 1!==e||1!==t.length||"undefined"!=typeof t[0]||!F(t,0)}();M(n,{push:ft},pt),M(n,{slice:function(t,e){var n=A(this)?q(this,""):this;return B(n,arguments)}},Q);var gt=function(){try{return[1,2].sort(null),[1,2].sort({}),!0}catch(t){}return!1}(),vt=function(){try{return[1,2].sort(/a/),!1}catch(t){}return!0}(),wt=function(){try{return[1,2].sort(void 0),!0}catch(t){}return!1}();M(n,{sort:function(e){if("undefined"==typeof e)return X(this);if(!t(e))throw new TypeError("Array.prototype.sort callback must be a function");return X(this,e)}},gt||!wt||!vt);var mt=!{toString:null}.propertyIsEnumerable("toString"),yt=function(){}.propertyIsEnumerable("prototype"),bt=!F("x","0"),jt=function(t){var e=t.constructor;return e&&e.prototype===t},Et={$window:!0,$console:!0,$parent:!0,$self:!0,$frame:!0,$frames:!0,$frameElement:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$external:!0},xt=function(){if("undefined"==typeof window)return!1;for(var t in window)try{!Et["$"+t]&&F(window,t)&&null!==window[t]&&"object"==typeof window[t]&&jt(window[t])}catch(e){return!0}return!1}(),_t=function(t){if("undefined"==typeof window||!xt)return jt(t);try{return jt(t)}catch(e){return!1}},Tt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],St=Tt.length,Ot=function(t){return"[object Arguments]"===H(t)},kt=function(e){return null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&!Y(e)&&t(e.callee)},At=Ot(arguments)?Ot:kt;M(r,{keys:function(e){var n=t(e),r=At(e),i=null!==e&&"object"==typeof e,o=i&&A(e);if(!i&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var a=[],u=yt&&n;if(o&&bt||r)for(var c=0;c<e.length;++c)W(a,s(c));if(!r)for(var l in e)u&&"prototype"===l||!F(e,l)||W(a,s(l));if(mt)for(var h=_t(e),f=0;St>f;f++){var d=Tt[f];h&&"constructor"===d||!F(e,d)||W(a,d)}return a}});var Ct=r.keys&&function(){return 2===r.keys(arguments).length}(1,2),Pt=r.keys&&function(){var t=r.keys(arguments);return 1!==arguments.length||1!==t.length||1!==t[0]}(1),It=r.keys;M(r,{keys:function(t){return It(At(t)?U(t):t)}},!Ct||Pt);var Lt=-621987552e5,Mt="-000001",Dt=Date.prototype.toISOString&&-1===new Date(Lt).toISOString().indexOf(Mt),Nt=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString();M(Date.prototype,{toISOString:function(){var t,e,n,r,i;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(r=this.getUTCFullYear(),i=this.getUTCMonth(),r+=Math.floor(i/12),i=(i%12+12)%12,t=[i+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],r=(0>r?"-":r>9999?"+":"")+z("00000"+Math.abs(r),r>=0&&9999>=r?-4:-6),e=t.length;e--;)n=t[e],10>n&&(t[e]="0"+n);return r+"-"+U(t,0,2).join("-")+"T"+U(t,2).join(":")+"."+z("000"+this.getUTCMilliseconds(),-3)+"Z"}},Dt||Nt);var $t=function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(Lt).toJSON().indexOf(Mt)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(t){return!1}}();$t||(Date.prototype.toJSON=function(e){var n=r(this),i=$.ToPrimitive(n);if("number"==typeof i&&!isFinite(i))return null;var o=n.toISOString;if(!t(o))throw new TypeError("toISOString property is not callable");return o.call(n)});var Rt=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),Ft=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z")),Ht=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(Ht||Ft||!Rt){var Ut=Math.pow(2,31)-1,Bt=N(new Date(1970,0,1,0,0,0,Ut+1).getTime());Date=function(t){var e=function(n,r,i,o,a,u,c){var l,h=arguments.length;if(this instanceof t){var f=u,d=c;if(Bt&&h>=7&&c>Ut){var p=Math.floor(c/Ut)*Ut,g=Math.floor(p/1e3);f+=g,d-=1e3*g}l=1===h&&s(n)===n?new t(e.parse(n)):h>=7?new t(n,r,i,o,a,f,d):h>=6?new t(n,r,i,o,a,f):h>=5?new t(n,r,i,o,a):h>=4?new t(n,r,i,o):h>=3?new t(n,r,i):h>=2?new t(n,r):h>=1?new t(n):new t}else l=t.apply(this,arguments);return D(l)||M(l,{constructor:e},!0),l},n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),r=[0,31,59,90,120,151,181,212,243,273,304,334,365],i=function(t,e){var n=e>1?1:0;return r[e]+Math.floor((t-1969+n)/4)-Math.floor((t-1901+n)/100)+Math.floor((t-1601+n)/400)+365*(t-1970)},o=function(e){var n=0,r=e;if(Bt&&r>Ut){var i=Math.floor(r/Ut)*Ut,o=Math.floor(i/1e3);n+=o,r-=1e3*o}return u(new t(1970,0,1,0,0,n,r))};for(var a in t)F(t,a)&&(e[a]=t[a]);M(e,{now:t.now,UTC:t.UTC},!0),e.prototype=t.prototype,M(e.prototype,{constructor:e},!0);var c=function(e){var r=n.exec(e);if(r){var s,a=u(r[1]),c=u(r[2]||1)-1,l=u(r[3]||1)-1,h=u(r[4]||0),f=u(r[5]||0),d=u(r[6]||0),p=Math.floor(1e3*u(r[7]||0)),g=Boolean(r[4]&&!r[8]),v="-"===r[9]?1:-1,w=u(r[10]||0),m=u(r[11]||0),y=f>0||d>0||p>0;return(y?24:25)>h&&60>f&&60>d&&1e3>p&&c>-1&&12>c&&24>w&&60>m&&l>-1&&l<i(a,c+1)-i(a,c)&&(s=60*(24*(i(a,c)+l)+h+w*v),s=1e3*(60*(s+f+m*v)+d)+p,g&&(s=o(s)),s>=-864e13&&864e13>=s)?s:NaN}return t.parse.apply(this,arguments)};return M(e,{parse:c}),e}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var zt=c.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0)),qt={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(t,e){for(var n=-1,r=e;++n<qt.size;)r+=t*qt.data[n],qt.data[n]=r%qt.base,r=Math.floor(r/qt.base)},divide:function(t){for(var e=qt.size,n=0;--e>=0;)n+=qt.data[e],qt.data[e]=Math.floor(n/t),n=n%t*qt.base},numToString:function(){for(var t=qt.size,e="";--t>=0;)if(""!==e||0===t||0!==qt.data[t]){var n=s(qt.data[t]);""===e?e=n:e+=z("0000000",0,7-n.length)+n}return e},pow:function ce(t,e,n){return 0===e?n:e%2===1?ce(t,e-1,n*t):ce(t*t,e/2,n)},log:function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}},Jt=function(t){var e,n,r,i,o,a,c,l;if(e=u(t),e=N(e)?0:Math.floor(e),0>e||e>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(n=u(this),N(n))return"NaN";if(-1e21>=n||n>=1e21)return s(n);if(r="",0>n&&(r="-",n=-n),i="0",n>1e-21)if(o=qt.log(n*qt.pow(2,69,1))-69,a=0>o?n*qt.pow(2,-o,1):n/qt.pow(2,o,1),a*=4503599627370496,o=52-o,o>0){for(qt.multiply(0,a),c=e;c>=7;)qt.multiply(1e7,0),c-=7;for(qt.multiply(qt.pow(10,c,1),0),c=o-1;c>=23;)qt.divide(1<<23),c-=23;qt.divide(1<<c),qt.multiply(1,1),qt.divide(2),i=qt.numToString()}else qt.multiply(0,a),qt.multiply(1<<-o,0),i=qt.numToString()+z("0.00000000000000000000",2,2+e);return e>0?(l=i.length,i=e>=l?r+z("0.0000000000000000000",0,e-l+2)+i:r+z(i,0,l-e)+"."+z(i,l-e)):i=r+i,i};M(c,{toFixed:Jt},zt);var Wt=function(){try{return"1"===1..toPrecision(void 0)}catch(t){return!0}}(),Vt=c.toPrecision;M(c,{toPrecision:function(t){return"undefined"==typeof t?Vt.call(this):Vt.call(this,t)}},Wt),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var t="undefined"==typeof/()??/.exec("")[1],e=Math.pow(2,32)-1;a.split=function(n,r){var i=String(this);if("undefined"==typeof n&&0===r)return[];if(!T(n))return q(this,n,r);var o,s,a,u,c=[],l=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(n.sticky?"y":""),h=0,d=new RegExp(n.source,l+"g");t||(o=new RegExp("^"+d.source+"$(?!\\s)",l));var p="undefined"==typeof r?e:$.ToUint32(r);for(s=d.exec(i);s&&(a=s.index+s[0].length,!(a>h&&(W(c,z(i,h,s.index)),!t&&s.length>1&&s[0].replace(o,function(){for(var t=1;t<arguments.length-2;t++)"undefined"==typeof arguments[t]&&(s[t]=void 0)}),s.length>1&&s.index<i.length&&f.apply(c,U(s,1)),u=s[0].length,h=a,c.length>=p)));)d.lastIndex===s.index&&d.lastIndex++,s=d.exec(i);return h===i.length?(u||!d.test(""))&&W(c,""):W(c,z(i,h)),c.length>p?z(c,0,p):c}}():"0".split(void 0,0).length&&(a.split=function(t,e){return"undefined"==typeof t&&0===e?[]:q(this,t,e)});var Xt=a.replace,Yt=function(){var t=[];return"x".replace(/x(.)?/g,function(e,n){W(t,n)}),1===t.length&&"undefined"==typeof t[0]}();Yt||(a.replace=function(e,n){var r=t(n),i=T(e)&&/\)[*?]/.test(e.source);if(r&&i){var o=function(t){var r=arguments.length,i=e.lastIndex;e.lastIndex=0;var o=e.exec(t)||[];return e.lastIndex=i,W(o,arguments[r-2],arguments[r-1]),n.apply(this,o)};return Xt.call(this,e,o)}return Xt.call(this,e,n)});var Gt=a.substr,Zt="".substr&&"b"!=="0b".substr(-1);M(a,{substr:function(t,e){var n=t;return 0>t&&(n=w(this.length+t,0)),Gt.call(this,n,e)}},Zt);var Qt="	\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff",Kt="​",te="["+Qt+"]",ee=new RegExp("^"+te+te+"*"),ne=new RegExp(te+te+"*$"),re=a.trim&&(Qt.trim()||!Kt.trim());M(a,{trim:function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");return s(this).replace(ee,"").replace(ne,"")}},re);var ie=a.lastIndexOf&&-1!=="abcあい".lastIndexOf("あい",2);M(a,{lastIndexOf:function(t){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");for(var e=s(this),n=s(t),r=arguments.length>1?u(arguments[1]):NaN,i=N(r)?1/0:$.ToInteger(r),o=m(w(i,0),e.length),a=n.length,c=o+a;c>0;){c=w(0,c-a);var l=J(z(e,c,o+a),n);if(-1!==l)return c+l}return-1}},ie);var oe=a.lastIndexOf;if(M(a,{lastIndexOf:function(t){return oe.apply(this,arguments)}},1!==a.lastIndexOf.length),(8!==parseInt(Qt+"08")||22!==parseInt(Qt+"0x16"))&&(parseInt=function(t){var e=/^[\-+]?0[xX]/;return function(n,r){var i=s(n).trim(),o=u(r)||(e.test(i)?16:10);return t(i,o)}}(parseInt)),"RangeError: test"!==String(new RangeError("test"))){var se=function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");var t=this.name;"undefined"==typeof t?t="Error":"string"!=typeof t&&(t=s(t));var e=this.message;return"undefined"==typeof e?e="":"string"!=typeof e&&(e=s(e)),t?e?t+": "+e:t:e};Error.prototype.toString=se}if(L){var ae=function(t,e){if(V(t,e)){var n=Object.getOwnPropertyDescriptor(t,e);n.enumerable=!1,Object.defineProperty(t,e,n)}};ae(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),ae(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){var ue=function(){var t="/"+this.source+"/";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),t};RegExp.prototype.toString=ue}})}(),function(){!function(t,e){"use strict";"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.returnExports=e()}(this,function(){var t,e,n,r,i=Function.call,o=Object.prototype,s=i.bind(o.hasOwnProperty),a=i.bind(o.propertyIsEnumerable),u=i.bind(o.toString),c=s(o,"__defineGetter__");c&&(t=i.bind(o.__defineGetter__),e=i.bind(o.__defineSetter__),n=i.bind(o.__lookupGetter__),r=i.bind(o.__lookupSetter__)),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){var e=t.__proto__;return e||null===e?e:"[object Function]"===u(t.constructor)?t.constructor.prototype:t instanceof Object?o:null});var l=function(t){try{return t.sentinel=0,0===Object.getOwnPropertyDescriptor(t,"sentinel").value}catch(e){return!1}};if(Object.defineProperty){var h=l({}),f="undefined"==typeof document||l(document.createElement("div"));if(!f||!h)var d=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||d){var p="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(t,e){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError(p+t);if(d)try{return d.call(Object,t,e)}catch(i){}var u;if(!s(t,e))return u;if(u={enumerable:a(t,e),configurable:!0},c){var l=t.__proto__,h=t!==o;h&&(t.__proto__=o);var f=n(t,e),g=r(t,e);if(h&&(t.__proto__=l),f||g)return f&&(u.get=f),g&&(u.set=g),u}return u.value=t[e],u.writable=!0,u}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),!Object.create){var g,v=!({__proto__:null}instanceof Object),w=function(){if(!document.domain)return!1;try{return!!new ActiveXObject("htmlfile")}catch(t){return!1}},m=function(){var t,e;return e=new ActiveXObject("htmlfile"),e.write("<script></script>"),e.close(),t=e.parentWindow.Object.prototype,e=null,t},y=function(){var t,e=document.createElement("iframe"),n=document.body||document.documentElement;return e.style.display="none",n.appendChild(e),e.src="javascript:",t=e.contentWindow.Object.prototype,n.removeChild(e),e=null,t};g=v||"undefined"==typeof document?function(){return{__proto__:null}}:function(){var t=w()?m():y();delete t.constructor,delete t.hasOwnProperty,delete t.propertyIsEnumerable,delete t.isPrototypeOf,delete t.toLocaleString,delete t.toString,delete t.valueOf;var e=function(){};return e.prototype=t,g=function(){return new e},new e},Object.create=function(t,e){var n,r=function(){};if(null===t)n=g();else{if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object prototype may only be an Object or null");r.prototype=t,n=new r,n.__proto__=t}return void 0!==e&&Object.defineProperties(n,e),n}}var b=function(t){try{return Object.defineProperty(t,"sentinel",{}),"sentinel"in t}catch(e){return!1}};if(Object.defineProperty){var j=b({}),E="undefined"==typeof document||b(document.createElement("div"));if(!j||!E)var x=Object.defineProperty,_=Object.defineProperties}if(!Object.defineProperty||x){var T="Property description must be an object: ",S="Object.defineProperty called on non-object: ",O="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(i,s,a){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError(S+i);if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError(T+a);if(x)try{return x.call(Object,i,s,a)}catch(u){}if("value"in a)if(c&&(n(i,s)||r(i,s))){var l=i.__proto__;i.__proto__=o,delete i[s],i[s]=a.value,i.__proto__=l}else i[s]=a.value;else{if(!c&&("get"in a||"set"in a))throw new TypeError(O);"get"in a&&t(i,s,a.get),"set"in a&&e(i,s,a.set)}return i}}(!Object.defineProperties||_)&&(Object.defineProperties=function(t,e){
if(_)try{return _.call(Object,t,e)}catch(n){}return Object.keys(e).forEach(function(n){"__proto__"!==n&&Object.defineProperty(t,n,e[n])}),t}),Object.seal||(Object.seal=function(t){if(Object(t)!==t)throw new TypeError("Object.seal can only be called on Objects.");return t}),Object.freeze||(Object.freeze=function(t){if(Object(t)!==t)throw new TypeError("Object.freeze can only be called on Objects.");return t});try{Object.freeze(function(){})}catch(k){Object.freeze=function(t){return function(e){return"function"==typeof e?e:t(e)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(t){if(Object(t)!==t)throw new TypeError("Object.preventExtensions can only be called on Objects.");return t}),Object.isSealed||(Object.isSealed=function(t){if(Object(t)!==t)throw new TypeError("Object.isSealed can only be called on Objects.");return!1}),Object.isFrozen||(Object.isFrozen=function(t){if(Object(t)!==t)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)!==t)throw new TypeError("Object.isExtensible can only be called on Objects.");for(var e="";s(t,e);)e+="?";t[e]=!0;var n=s(t,e);return delete t[e],n})})}(),function(){(function(){function t(t,n){return e(L(t),Xt)}function e(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function n(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(null!=s&&(a===re?s===s:n(s,a)))var a=s,u=o}return u}function r(t,e,n,r){var i;return n(t,function(t,n,o){return e(t,n,o)?(i=r?n:t,!1):void 0}),i}function i(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function o(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function s(t,e){return k(e,function(e){return t[e]})}function a(t){return t&&t.Object===Object?t:null}function u(t,e){if(t!==e){var n=null===t,r=t===re,i=t===t,o=null===e,s=e===re,a=e===e;if(t>e&&!o||!i||n&&!s&&a||r&&a)return 1;if(e>t&&!n||!a||o&&!r&&i||s&&i)return-1}return 0}function c(t){return Te[t]}function l(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function h(t,e){return t="number"==typeof t||_e.test(t)?+t:-1,e=null==e?le:e,t>-1&&t%1==0&&e>t}function f(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function d(t){if(Lt(t)&&!on(t)){if(t instanceof p)return t;if($e.call(t,"__wrapped__"))return X(t)}return new p(t)}function p(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e}function g(t,e,n,r){return t===re||bt(t,Ne[n])&&!$e.call(r,n)?e:t}function v(t,e,n){var r=t[e];(!bt(r,n)||bt(r,Ne[e])&&!$e.call(t,e)||n===re&&!(e in t))&&(t[e]=n)}function w(t,e,n){if("function"!=typeof t)throw new TypeError(ce);return setTimeout(function(){t.apply(re,n)},e)}function m(t,e){var n=!0;return Xe(t,function(t,r,i){return n=!!e(t,r,i)}),n}function y(t,e){var n=[];return Xe(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function b(t,n,r,i){i||(i=[]);for(var o=-1,s=t.length;++o<s;){var a=t[o];_t(a)&&(r||on(a)||Et(a))?n?b(a,n,r,i):e(i,a):r||(i[i.length]=a)}return i}function j(t,e){return t&&Ye(t,e,Jt)}function E(t,e){return y(e,function(e){return Ct(t[e])})}function x(t,e,n,r,i){return t===e?!0:null==t||null==e||!It(t)&&!Lt(e)?t!==t&&e!==e:_(t,e,x,n,r,i)}function _(t,e,n,r,i,o){var s=on(t),a=on(e),u=fe,c=fe;s||(u=Fe.call(t),u==he&&(u=ye)),a||(c=Fe.call(e),c==he&&(c=ye));var h=u==ye&&!l(t),f=c==ye&&!l(e),d=u==c;if(d&&!s&&!h)return z(t,e,u,n,r,i);var p=i&ue;if(!p){var g=h&&$e.call(t,"__wrapped__"),v=f&&$e.call(e,"__wrapped__");if(g||v)return n(g?t.value():t,v?e.value():e,r,i,o)}if(!d)return!1;o||(o=[]);var w=ut(o,function(e){return e[0]===t});if(w&&w[1])return w[1]==e;o.push([t,e]);var m=(s?B:q)(t,e,n,r,i,o);return o.pop(),m}function T(t){var e=typeof t;return"function"==e?t:null==t?Gt:("object"==e?A:P)(t)}function S(t){return Je(Object(t))}function O(t){t=null==t?t:Object(t);var e=[];for(var n in t)e.push(n);return e}function k(t,e){var n=-1,r=xt(t)?Array(t.length):[];return Xe(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function A(t){var e=Jt(t),n=e.length;return function(r){if(null==r)return!n;for(r=Object(r);n--;){var i=e[n];if(!(i in r&&x(t[i],r[i],re,!0)))return!1}return!0}}function C(t,e){return t=Object(t),ht(e,function(e,n){return n in t&&(e[n]=t[n]),e},{})}function P(t){return function(e){return null==e?re:e[t]}}function I(t,e,n){var r=-1,i=t.length;0>e&&(e=-e>i?0:i+e),n=n>i?i:n,0>n&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function L(t){return I(t,0,t.length)}function M(t,e){var n;return Xe(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function D(t,n){var r=t;return ht(n,function(t,n){return n.func.apply(n.thisArg,e([t],n.args))},r)}function N(t,e,n,r){n||(n={});for(var i=-1,o=e.length;++i<o;){var s=e[i],a=r?r(n[s],t[s],s,n,t):t[s];v(n,s,a)}return n}function $(t){return mt(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:re;for(o="function"==typeof o?(i--,o):re,e=Object(e);++r<i;){var s=n[r];s&&t(e,s,o)}return e})}function R(t,e){return function(n,r){if(null==n)return n;if(!xt(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Object(n);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return n}}function F(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(n(o[u],u,o)===!1)break}return e}}function H(t){return function(){var e=arguments,n=Ve(t.prototype),r=t.apply(n,e);return It(r)?r:n}}function U(t,e,n,r){function i(){for(var e=-1,a=arguments.length,u=-1,c=r.length,l=Array(c+a),h=this&&this!==Me&&this instanceof i?s:t;++u<c;)l[u]=r[u];for(;a--;)l[u++]=arguments[++e];return h.apply(o?n:this,l)}if("function"!=typeof t)throw new TypeError(ce);var o=e&oe,s=H(t);return i}function B(t,e,n,r,i,o){var s=-1,a=i&ue,u=i&ae,c=t.length,l=e.length;if(c!=l&&!(a&&l>c))return!1;for(var h=!0;++s<c;){var f,d=t[s],p=e[s];if(f!==re){if(f)continue;h=!1;break}if(u){if(!M(e,function(t){return d===t||n(d,t,r,i,o)})){h=!1;break}}else if(d!==p&&!n(d,p,r,i,o)){h=!1;break}}return h}function z(t,e,n,r,i,o){switch(n){case de:case pe:return+t==+e;case ge:return t.name==e.name&&t.message==e.message;case me:return t!=+t?e!=+e:t==+e;case be:case je:return t==e+""}return!1}function q(t,e,n,r,i,o){var s=i&ue,a=i&ae,u=Jt(t),c=u.length,l=Jt(e),h=l.length;if(c!=h&&!s)return!1;for(var f=c;f--;){var d=u[f];if(!(s?d in e:$e.call(e,d))||!a&&d!=l[f])return!1}for(var p=!0,g=s;++f<c;){d=u[f];var v,w=t[d],m=e[d];if(!(v===re?w===m||n(w,m,r,i,o):v)){p=!1;break}g||(g="constructor"==d)}if(p&&!g){var y=t.constructor,b=e.constructor;y!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(p=!1)}return p}function J(t){var e=t?t.length:re;return Pt(e)&&(on(t)||Rt(t)||Et(t))?o(e,String):null}function W(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||Ne;return t===n}function V(t){return"function"==typeof t?t:Gt}function X(t){var e=new p(t.__wrapped__,t.__chain__);return e.__actions__=L(t.__actions__),e}function Y(t){return y(t,Boolean)}function G(t){var e=t?t.length:0;return e?b(t):[]}function Z(t){var e=t?t.length:0;return e?b(t,!0):[]}function Q(t){return t?t[0]:re}function K(t,e,n){var r=t?t.length:0;n="number"==typeof n?0>n?We(r+n,0):n:0;for(var i=(n||0)-1,o=e===e;++i<r;){var s=t[i];if(o?s===e:s!==s)return i}return-1}function tt(t){var e=t?t.length:0;return e?t[e-1]:re}function et(t,e,n){var r=t?t.length:0;return r?I(t,e,n):[]}function nt(t){var e=d(t);return e.__chain__=!0,e}function rt(t,e){return e(t),t}function it(t,e){return e(t)}function ot(){return D(this.__wrapped__,this.__actions__)}function st(t,e,n){return e=n?re:e,m(t,T(e))}function at(t,e){return y(t,T(e))}function ut(t,e){return r(t,T(e),Xe)}function ct(t,e){return Xe(t,V(e))}function lt(t,e){return k(t,T(e))}function ht(t,e,n){return i(t,T(e),n,arguments.length<3,Xe)}function ft(t){return null==t?0:(t=xt(t)?t:Jt(t),t.length)}function dt(t,e,n){return e=n?re:e,M(t,T(e))}function pt(t,e){var n=0;return e=T(e),k(k(t,function(t,r,i){return{value:t,index:n++,criteria:e(t,r,i)}}).sort(function(t,e){return u(t.criteria,e.criteria)||t.index-e.index}),P("value"))}function gt(t,e){var n;if("function"!=typeof e)throw new TypeError(ce);return t=sn(t),function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=re),n}}function vt(t){if("function"!=typeof t)throw new TypeError(ce);return function(){return!t.apply(this,arguments)}}function wt(t){return gt(2,t)}function mt(t,e){if("function"!=typeof t)throw new TypeError(ce);return e=We(e===re?t.length-1:sn(e),0),function(){for(var n=arguments,r=-1,i=We(n.length-e,0),o=Array(i);++r<i;)o[r]=n[e+r];var s=Array(e+1);for(r=-1;++r<e;)s[r]=n[r];return s[e]=o,t.apply(this,s)}}function yt(t){return It(t)?on(t)?L(t):Ge(t,Jt(t)):t}function bt(t,e){return t===e||t!==t&&e!==e}function jt(t,e){return t>e}function Et(t){return _t(t)&&$e.call(t,"callee")&&(!ze.call(t,"callee")||Fe.call(t)==he)}function xt(t){return null!=t&&!("function"==typeof t&&Ct(t))&&Pt(Ze(t))}function _t(t){return Lt(t)&&xt(t)}function Tt(t){return t===!0||t===!1||Lt(t)&&Fe.call(t)==de}function St(t){return Lt(t)&&Fe.call(t)==pe}function Ot(t){return!Lt(t)||Ct(t.splice)?!ft(t):!Jt(t).length}function kt(t,e){return x(t,e)}function At(t){return"number"==typeof t&&qe(t)}function Ct(t){var e=It(t)?Fe.call(t):"";return e==ve||e==we}function Pt(t){return"number"==typeof t&&t>-1&&t%1==0&&le>=t}function It(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Lt(t){return!!t&&"object"==typeof t}function Mt(t){return Nt(t)&&t!=+t}function Dt(t){return null===t}function Nt(t){return"number"==typeof t||Lt(t)&&Fe.call(t)==me}function $t(t){return It(t)&&Fe.call(t)==be}function Rt(t){return"string"==typeof t||!on(t)&&Lt(t)&&Fe.call(t)==je}function Ft(t){return t===re}function Ht(t,e){return e>t}function Ut(t){return xt(t)?t.length?L(t):[]:Xt(t)}function Bt(t){return"string"==typeof t?t:null==t?"":t+""}function zt(t,e){var n=Ve(t);return e?un(n,e):n}function qt(t,e){return null!=t&&$e.call(t,e)}function Jt(t){var e=W(t);if(!e&&!xt(t))return S(t);var n=J(t),r=!!n,i=n||[],o=i.length;for(var s in t)!$e.call(t,s)||r&&("length"==s||h(s,o))||e&&"constructor"==s||i.push(s);return i}function Wt(t){for(var e=-1,n=W(t),r=O(t),i=r.length,o=J(t),s=!!o,a=o||[],u=a.length;++e<i;){var c=r[e];s&&("length"==c||h(c,u))||"constructor"==c&&(n||!$e.call(t,c))||a.push(c)}return a}function Vt(t,e,n){var r=null==t?re:t[e];return r===re&&(r=n),Ct(r)?r.call(t):r}function Xt(t){return t?s(t,Jt(t)):[]}function Yt(t){return t=Bt(t),t&&xe.test(t)?t.replace(Ee,c):t}function Gt(t){return t}function Zt(t,n,r){var i=Jt(n),o=E(n,i);null!=r||It(n)&&(o.length||!i.length)||(r=n,n=t,t=this,o=E(n,Jt(n)));var s=It(r)&&"chain"in r?r.chain:!0,a=Ct(t);return Xe(o,function(r){var i=n[r];t[r]=i,a&&(t.prototype[r]=function(){var n=this.__chain__;if(s||n){var r=t(this.__wrapped__),o=r.__actions__=L(this.__actions__);return o.push({func:i,args:arguments,thisArg:t}),r.__chain__=n,r}return i.apply(t,e([this.value()],arguments))})}),t}function Qt(){return Me._=He,this}function Kt(){}function te(t){var e=++Re;return Bt(t)+e}function ee(t){return t&&t.length?n(t,Gt,jt):re}function ne(t){return t&&t.length?n(t,Gt,Ht):re}var re,ie="4.0.0",oe=1,se=32,ae=1,ue=2,ce="Expected a function",le=9007199254740991,he="[object Arguments]",fe="[object Array]",de="[object Boolean]",pe="[object Date]",ge="[object Error]",ve="[object Function]",we="[object GeneratorFunction]",me="[object Number]",ye="[object Object]",be="[object RegExp]",je="[object String]",Ee=/[&<>"'`]/g,xe=RegExp(Ee.source),_e=/^(?:0|[1-9]\d*)$/,Te={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Se={"function":!0,object:!0},Oe=Se[typeof exports]&&exports&&!exports.nodeType?exports:null,ke=Se[typeof module]&&module&&!module.nodeType?module:null,Ae=a(Oe&&ke&&"object"==typeof global&&global),Ce=a(Se[typeof self]&&self),Pe=a(Se[typeof window]&&window),Ie=ke&&ke.exports===Oe?Oe:null,Le=a(Se[typeof this]&&this),Me=Ae||Pe!==(Le&&Le.window)&&Pe||Ce||Le||Function("return this")(),De=Array.prototype,Ne=Object.prototype,$e=Ne.hasOwnProperty,Re=0,Fe=Ne.toString,He=Me._,Ue=(Me.Symbol,Me.Reflect),Be=(Me.Uint8Array,Ue?Ue.enumerate:re),ze=Ne.propertyIsEnumerable,qe=Me.isFinite,Je=Object.keys,We=Math.max,Ve=function(){function t(){}return function(e){if(It(e)){t.prototype=e;var n=new t;t.prototype=re}return n||{}}}(),Xe=R(j),Ye=F();Be&&!ze.call({valueOf:1},"valueOf")&&(O=function(t){return f(Be(t))});var Ge=N,Ze=P("length"),Qe=mt(function(e,n){return n=b(n),t(on(e)?e:[Object(e)],n)}),Ke=mt(function(t,e,n){var r="function"==typeof e;return k(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})}),tn=Date.now,en=mt(function(t,e,n){return U(t,oe|se,e,n)}),nn=mt(function(t,e){return w(t,1,e)}),rn=mt(function(t,e,n){return w(t,an(e)||0,n)}),on=Array.isArray,sn=Number,an=Number,un=$(function(t,e){Ge(e,Jt(e),t)}),cn=$(function(t,e){Ge(e,Wt(e),t)}),ln=$(function(t,e,n){N(e,Wt(e),t,n)}),hn=mt(function(t){return t.push(re,g),ln.apply(re,t)}),fn=mt(function(t,e){return null==t?{}:C(t,b(e))}),dn=T;p.prototype=Ve(d.prototype),p.prototype.constructor=p,d.assignIn=cn,d.before=gt,d.bind=en,d.chain=nt,d.compact=Y,d.concat=Qe,d.create=zt,d.defaults=hn,d.defer=nn,d.delay=rn,d.filter=at,d.flatten=G,d.flattenDeep=Z,d.invokeMap=Ke,d.iteratee=dn,d.keys=Jt,d.map=lt,d.mixin=Zt,d.negate=vt,d.once=wt,d.pick=fn,d.slice=et,d.sortBy=pt,d.tap=rt,d.thru=it,d.toArray=Ut,d.values=Xt,d.each=ct,d.extend=cn,Zt(d,d),d.clone=yt,d.escape=Yt,d.every=st,d.find=ut,d.forEach=ct,d.has=qt,d.head=Q,d.identity=Gt,d.indexOf=K,d.isArguments=Et,d.isArray=on,d.isBoolean=Tt,d.isDate=St,d.isEmpty=Ot,d.isEqual=kt,d.isFinite=At,d.isFunction=Ct,d.isNaN=Mt,d.isNull=Dt,d.isNumber=Nt,d.isObject=It,d.isRegExp=$t,d.isString=Rt,d.isUndefined=Ft,d.last=tt,d.max=ee,d.min=ne,d.noConflict=Qt,d.noop=Kt,d.now=tn,d.reduce=ht,d.result=Vt,d.size=ft,d.some=dt,d.uniqueId=te,d.first=Q,Zt(d,function(){var t={};return j(d,function(e,n){$e.call(d.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),d.VERSION=ie,Xe(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],function(t){var e=(/^(?:replace|split)$/.test(t)?String.prototype:De)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|join|replace|shift)$/.test(t);d.prototype[t]=function(){var t=arguments;return r&&!this.__chain__?e.apply(this.value(),t):this[n](function(n){return e.apply(n,t)})}}),d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=ot,(Pe||Ce||{})._=d,"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return d}):Oe&&ke?(Ie&&((ke.exports=d)._=d),Oe._=d):Me._=d}).call(this)}(),function(){!function(t){function e(e){var n=e.length,r=typeof e;return p(r)||e===t?!1:1===e.nodeType&&n?!0:g(r)||0===n||"number"==typeof n&&n>0&&n-1 in e}function n(t,e){var n,r;this.originalEvent=t,r=function(t,e){"preventDefault"===t?this[t]=function(){return this.defaultPrevented=!0,e[t]()}:"stopImmediatePropagation"===t?this[t]=function(){return this.immediatePropagationStopped=!0,e[t]()}:p(e[t])?this[t]=function(){return e[t]()}:this[t]=e[t]};for(n in t)(t[n]||"function"==typeof t[n])&&r.call(this,n,t);v.extend(this,e,{isImmediatePropagationStopped:function(){return!!this.immediatePropagationStopped}})}var r,i=t.$,o=t.jBone,s=/^<(\w+)\s*\/?>$/,a=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,u=[].slice,c=[].splice,l=Object.keys,h=document,f=function(t){return"string"==typeof t},d=function(t){return t instanceof Object},p=function(t){return"[object Function]"==={}.toString.call(t)},g=function(t){return Array.isArray(t)},v=function(t,e){return new r.init(t,e)};v.noConflict=function(){return t.$=i,t.jBone=o,v},r=v.fn=v.prototype={init:function(t,e){var n,r,i,o;if(!t)return this;if(f(t)){if(r=s.exec(t))return this[0]=h.createElement(r[1]),this.length=1,d(e)&&this.attr(e),this;if((r=a.exec(t))&&r[1]){for(o=h.createDocumentFragment(),i=h.createElement("div"),i.innerHTML=t;i.lastChild;)o.appendChild(i.firstChild);return n=u.call(o.childNodes),v.merge(this,n)}if(v.isElement(e))return v(e).find(t);try{return n=h.querySelectorAll(t),v.merge(this,n)}catch(c){return this}}return t.nodeType?(this[0]=t,this.length=1,this):p(t)?t():t instanceof v?t:v.makeArray(t,this)},pop:[].pop,push:[].push,reverse:[].reverse,shift:[].shift,sort:[].sort,splice:[].splice,slice:[].slice,indexOf:[].indexOf,forEach:[].forEach,unshift:[].unshift,concat:[].concat,join:[].join,every:[].every,some:[].some,filter:[].filter,map:[].map,reduce:[].reduce,reduceRight:[].reduceRight,length:0},r.constructor=v,r.init.prototype=r,v.setId=function(e){var n=e.jid;e===t?n="window":void 0===e.jid&&(e.jid=n=++v._cache.jid),v._cache.events[n]||(v._cache.events[n]={})},v.getData=function(e){e=e instanceof v?e[0]:e;var n=e===t?"window":e.jid;return{jid:n,events:v._cache.events[n]}},v.isElement=function(t){return t&&t instanceof v||t instanceof HTMLElement||f(t)},v._cache={events:{},jid:0},r.pushStack=function(t){var e=v.merge(this.constructor(),t);return e},v.merge=function(t,e){for(var n=e.length,r=t.length,i=0;n>i;)t[r++]=e[i++];return t.length=r,t},v.contains=function(t,e){return t.contains(e)},v.extend=function(t){var e;return c.call(arguments,1).forEach(function(n){if(e=t,n)for(var r in n)e[r]=n[r]}),t},v.makeArray=function(t,n){var r=n||[];return null!==t&&(e(t)?v.merge(r,f(t)?[t]:t):r.push(t)),r},v.unique=function(t){if(null==t)return[];for(var e=[],n=0,r=t.length;r>n;n++){var i=t[n];e.indexOf(i)<0&&e.push(i)}return e},v.Event=function(t,e){var n,r;return t.type&&!e&&(e=t,t=t.type),n=t.split(".").splice(1).join("."),r=t.split(".")[0],t=h.createEvent("Event"),t.initEvent(r,!0,!0),v.extend(t,{namespace:n,isDefaultPrevented:function(){return t.defaultPrevented}},e)},v.event={add:function(t,e,n,r,i){v.setId(t);var o,s,a,u=function(e){v.event.dispatch.call(t,e)},c=v.getData(t).events;for(e=e.split(" "),s=e.length;s--;)a=e[s],o=a.split(".")[0],c[o]=c[o]||[],c[o].length?u=c[o][0].fn:t.addEventListener&&t.addEventListener(o,u,!1),c[o].push({namespace:a.split(".").splice(1).join("."),fn:u,selector:i,data:r,originfn:n})},remove:function(t,e,n){var r,i,o=function(t,e,r,i,o){var s;(n&&o.originfn===n||!n)&&(s=o.fn),t[e][r].fn===s&&(t[e].splice(r,1),t[e].length||i.removeEventListener(e,s))},s=v.getData(t).events;if(s)return!e&&s?l(s).forEach(function(e){for(i=s[e],r=i.length;r--;)o(s,e,r,t,i[r])}):void e.split(" ").forEach(function(e){var n,a=e.split(".")[0],u=e.split(".").splice(1).join(".");if(s[a])for(i=s[a],r=i.length;r--;)n=i[r],(!u||u&&n.namespace===u)&&o(s,a,r,t,n);else u&&l(s).forEach(function(e){for(i=s[e],r=i.length;r--;)n=i[r],n.namespace.split(".")[0]===u.split(".")[0]&&o(s,e,r,t,n)})})},trigger:function(t,e){var n=[];f(e)?n=e.split(" ").map(function(t){return v.Event(t)}):(e=e instanceof Event?e:v.Event(e),n=[e]),n.forEach(function(e){e.type&&t.dispatchEvent&&t.dispatchEvent(e)})},dispatch:function(t){for(var e,r,i,o,s,a=0,u=0,c=this,l=v.getData(c).events[t.type],h=l.length,f=[],d=[];h>a;a++)f.push(l[a]);for(a=0,h=f.length;h>a&&~l.indexOf(f[a])&&(!o||!o.isImmediatePropagationStopped());a++)if(r=null,s={},i=f[a],i.data&&(s.data=i.data),i.selector){if(~(d=v(c).find(i.selector)).indexOf(t.target)&&(r=t.target)||c!==t.target&&c.contains(t.target)){if(!r)for(e=d.length,u=0;e>u;u++)d[u]&&d[u].contains(t.target)&&(r=d[u]);if(!r)continue;s.currentTarget=r,o=new n(t,s),t.namespace&&t.namespace!==i.namespace||i.originfn.call(r,o)}}else o=new n(t,s),t.namespace&&t.namespace!==i.namespace||i.originfn.call(c,o)}},r.on=function(t,e,n,r){var i=this.length,o=0;if(null==n&&null==r?(r=e,n=e=void 0):null==r&&("string"==typeof e?(r=n,n=void 0):(r=n,n=e,e=void 0)),!r)return this;for(;i>o;o++)v.event.add(this[o],t,r,n,e);return this},r.one=function(t){var e,n=arguments,r=0,i=this.length,o=u.call(n,1,n.length-1),s=u.call(n,-1)[0];for(e=function(e){var n=v(e);t.split(" ").forEach(function(t){var r=function(i){n.off(t,r),s.call(e,i)};n.on.apply(n,[t].concat(o,r))})};i>r;r++)e(this[r]);return this},r.trigger=function(t){var e=0,n=this.length;if(!t)return this;for(;n>e;e++)v.event.trigger(this[e],t);return this},r.off=function(t,e){for(var n=0,r=this.length;r>n;n++)v.event.remove(this[n],t,e);return this},r.find=function(t){for(var e=[],n=0,r=this.length,i=function(n){p(n.querySelectorAll)&&[].forEach.call(n.querySelectorAll(t),function(t){e.push(t)})};r>n;n++)i(this[n]);return v(e)},r.get=function(t){return null!=t?0>t?this[t+this.length]:this[t]:u.call(this)},r.eq=function(t){return v(this[t])},r.parent=function(){for(var t,e=[],n=0,r=this.length;r>n;n++)!~e.indexOf(t=this[n].parentElement)&&t&&e.push(t);return v(e)},r.toArray=function(){return u.call(this)},r.is=function(){var t=arguments;return this.some(function(e){return e.tagName.toLowerCase()===t[0]})},r.has=function(){var t=arguments;return this.some(function(e){return e.querySelectorAll(t[0]).length})},r.add=function(t,e){return this.pushStack(v.unique(v.merge(this.get(),v(t,e))))},r.attr=function(t,e){var n,r=arguments,i=0,o=this.length;if(f(t)&&1===r.length)return this[0]&&this[0].getAttribute(t);for(2===r.length?n=function(n){n.setAttribute(t,e)}:d(t)&&(n=function(e){l(t).forEach(function(n){e.setAttribute(n,t[n])})});o>i;i++)n(this[i]);return this},r.removeAttr=function(t){for(var e=0,n=this.length;n>e;e++)this[e].removeAttribute(t);return this},r.val=function(t){var e=0,n=this.length;if(0===arguments.length)return this[0]&&this[0].value;for(;n>e;e++)this[e].value=t;return this},r.css=function(e,n){var r,i=arguments,o=0,s=this.length;if(f(e)&&1===i.length)return this[0]&&t.getComputedStyle(this[0])[e];for(2===i.length?r=function(t){t.style[e]=n}:d(e)&&(r=function(t){l(e).forEach(function(n){t.style[n]=e[n]})});s>o;o++)r(this[o]);return this},r.data=function(t,e){var n,r=arguments,i={},o=0,s=this.length,a=function(t,e,n){d(n)?(t.jdata=t.jdata||{},t.jdata[e]=n):t.dataset[e]=n},u=function(t){return"true"===t?!0:"false"===t?!1:t};if(0===r.length)return this[0].jdata&&(i=this[0].jdata),l(this[0].dataset).forEach(function(t){i[t]=u(this[0].dataset[t])},this),i;if(1===r.length&&f(t))return this[0]&&u(this[0].dataset[t]||this[0].jdata&&this[0].jdata[t]);for(1===r.length&&d(t)?n=function(e){l(t).forEach(function(n){a(e,n,t[n])})}:2===r.length&&(n=function(n){a(n,t,e)});s>o;o++)n(this[o]);return this},r.removeData=function(t){for(var e,n,r=0,i=this.length;i>r;r++)if(e=this[r].jdata,n=this[r].dataset,t)e&&e[t]&&delete e[t],delete n[t];else{for(t in e)delete e[t];for(t in n)delete n[t]}return this},r.addClass=function(t){for(var e=0,n=0,r=this.length,i=t?t.trim().split(/\s+/):[];r>e;e++)for(n=0,n=0;n<i.length;n++)this[e].classList.add(i[n]);return this},r.removeClass=function(t){for(var e=0,n=0,r=this.length,i=t?t.trim().split(/\s+/):[];r>e;e++)for(n=0,n=0;n<i.length;n++)this[e].classList.remove(i[n]);return this},r.toggleClass=function(t,e){var n=0,r=this.length,i="toggle";if(e===!0&&(i="add")||e===!1&&(i="remove"),t)for(;r>n;n++)this[n].classList[i](t);return this},r.hasClass=function(t){var e=0,n=this.length;if(t)for(;n>e;e++)if(this[e].classList.contains(t))return!0;return!1},r.html=function(t){var e,n=arguments;return 1===n.length&&void 0!==t?this.empty().append(t):0===n.length&&(e=this[0])?e.innerHTML:this},r.append=function(t){var e,n=0,r=this.length;for(f(t)&&a.exec(t)?t=v(t):d(t)||(t=document.createTextNode(t)),t=t instanceof v?t:v(t),e=function(e,n){t.forEach(function(t){n?e.appendChild(t.cloneNode(!0)):e.appendChild(t)})};r>n;n++)e(this[n],n);return this},r.appendTo=function(t){return v(t).append(this),this},r.empty=function(){for(var t,e=0,n=this.length;n>e;e++)for(t=this[e];t.lastChild;)t.removeChild(t.lastChild);return this},r.remove=function(){var t,e=0,n=this.length;for(this.off();n>e;e++)t=this[e],delete t.jdata,t.parentNode&&t.parentNode.removeChild(t);return this},"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=v:"function"==typeof define&&define.amd?(define(function(){return v}),t.jBone=t.$=v):"object"==typeof t&&"object"==typeof t.document&&(t.jBone=t.$=v)}(window)}(),function(){(function(){var t,e,n,r,i,o,s,a,u,c,l,h,f,d,p=[].slice;i="3.0.0",e="pending",r="resolved",n="rejected",u=function(t,e){return null!=t?t.hasOwnProperty(e):void 0},l=function(t){return u(t,"length")&&u(t,"callee")},h=function(t){return u(t,"promise")&&"function"==typeof(null!=t?t.promise:void 0)},a=function(t){return l(t)?a(Array.prototype.slice.call(t)):Array.isArray(t)?t.reduce(function(t,e){return Array.isArray(e)?t.concat(a(e)):(t.push(e),t)},[]):[t]},o=function(t,e){return 0>=t?e():function(){return--t<1?e.apply(this,arguments):void 0}},f=function(t,e){return function(){var n;return n=[t].concat(Array.prototype.slice.call(arguments,0)),e.apply(this,n)}},s=function(t,e,n){var r,i,o,s,u;for(s=a(t),u=[],i=0,o=s.length;o>i;i++)r=s[i],u.push(r.call.apply(r,[n].concat(p.call(e))));return u},t=function(){var i,o,u,c,l,f,d;return d=e,c=[],l=[],f=[],u={resolved:{},rejected:{},pending:{}},this.promise=function(i){var o,g;return i=i||{},i.state=function(){return d},g=function(t,n,r){return function(){return d===e&&n.push.apply(n,a(arguments)),t()&&s(arguments,u[r]),i}},i.done=g(function(){return d===r},c,r),i.fail=g(function(){return d===n},l,n),i.progress=g(function(){return d!==e},f,e),i.always=function(){var t;return(t=i.done.apply(i,arguments)).fail.apply(t,arguments)},o=function(e,n,r){var o,s;return s=new t,o=function(t,e,n){return n?i[t](function(){var t,r;return t=1<=arguments.length?p.call(arguments,0):[],r=n.apply(null,t),h(r)?r.done(s.resolve).fail(s.reject).progress(s.notify):s[e](r)}):i[t](s[e])},o("done","resolve",e),o("fail","reject",n),o("progress","notify",r),s},i.pipe=o,i.then=o,null==i.promise&&(i.promise=function(){return i}),i},this.promise(this),i=this,o=function(t,n,r){return function(){return d===e?(d=t,u[t]=arguments,s(n,u[t],r),i):this}},this.resolve=o(r,c),this.reject=o(n,l),this.notify=o(e,f),this.resolveWith=function(t,e){return o(r,c,t).apply(null,e)},this.rejectWith=function(t,e){return o(n,l,t).apply(null,e)},this.notifyWith=function(t,n){return o(e,f,t).apply(null,n)},this},d=function(){var e,n,r,i,s,u,c;if(n=a(arguments),1===n.length)return h(n[0])?n[0]:(new t).resolve(n[0]).promise();if(s=new t,!n.length)return s.resolve().promise();for(i=[],r=o(n.length,function(){return s.resolve.apply(s,i)}),n.forEach(function(t,e){return h(t)?t.done(function(){var t;return t=1<=arguments.length?p.call(arguments,0):[],i[e]=t.length>1?t:t[0],r()}):(i[e]=t,r())}),u=0,c=n.length;c>u;u++)e=n[u],h(e)&&e.fail(s.reject);return s.promise()},c=function(e){return e.Deferred=function(){return new t},e.ajax=f(e.ajax,function(e,n){var r,i,o,s;return null==n&&(n={}),i=new t,r=function(t,e){return f(t,function(){var t,n;return n=arguments[0],t=2<=arguments.length?p.call(arguments,1):[],n&&n.apply(null,t),e.apply(null,t)})},n.success=r(n.success,i.resolve),n.error=r(n.error,i.reject),s=e(n),o=i.promise(),o.abort=function(){return s.abort()},o}),e.when=d},"undefined"!=typeof exports?(exports.Deferred=function(){return new t},exports.when=d,exports.installInto=c):"function"==typeof define&&define.amd?define(function(){return"undefined"!=typeof Zepto?c(Zepto):(t.when=d,t.installInto=c,t)}):"undefined"!=typeof Zepto?c(Zepto):(this.Deferred=function(){return new t},this.Deferred.when=d,this.Deferred.installInto=c)}).call(this)}(),function(){!function(t){var e="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if("undefined"!=typeof exports){var n,r=require("underscore");try{n=require("jquery")}catch(i){}t(e,exports,r,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,n,r){var i=t.Backbone,o=Array.prototype.slice;e.VERSION="1.2.3",e.$=r,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s=function(t,e,r){switch(t){case 1:return function(){return n[e](this[r])};case 2:return function(t){return n[e](this[r],t)};case 3:return function(t,i){return n[e](this[r],u(t,this),i)};case 4:return function(t,i,o){return n[e](this[r],u(t,this),i,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[r]),n[e].apply(n,t)}}},a=function(t,e,r){n.each(e,function(e,i){n[i]&&(t.prototype[i]=s(e,i,r))})},u=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?c(t):n.isString(t)?function(e){return e.get(t)}:t},c=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}},l=e.Events={},h=/\s+/,f=function(t,e,r,i,o){var s,a=0;if(r&&"object"==typeof r){void 0!==i&&"context"in o&&void 0===o.context&&(o.context=i);for(s=n.keys(r);a<s.length;a++)e=f(t,e,s[a],r[s[a]],o)}else if(r&&h.test(r))for(s=r.split(h);a<s.length;a++)e=t(e,s[a],i,o);else e=t(e,r,i,o);return e};l.on=function(t,e,n){return d(this,t,e,n)};var d=function(t,e,n,r,i){if(t._events=f(p,t._events||{},e,n,{context:r,ctx:t,listening:i}),i){var o=t._listeners||(t._listeners={});o[i.id]=i}return t};l.listenTo=function(t,e,r){if(!t)return this;var i=t._listenId||(t._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),s=o[i];if(!s){var a=this._listenId||(this._listenId=n.uniqueId("l"));s=o[i]={obj:t,objId:i,id:a,listeningTo:o,count:0}}return d(t,e,r,this,s),this};var p=function(t,e,n,r){if(n){var i=t[e]||(t[e]=[]),o=r.context,s=r.ctx,a=r.listening;a&&a.count++,i.push({callback:n,context:o,ctx:o||s,listening:a})}return t};l.off=function(t,e,n){return this._events?(this._events=f(g,this._events,t,e,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(t,e,r){var i=this._listeningTo;if(!i)return this;for(var o=t?[t._listenId]:n.keys(i),s=0;s<o.length;s++){var a=i[o[s]];if(!a)break;a.obj.off(e,r,this)}return n.isEmpty(i)&&(this._listeningTo=void 0),this};var g=function(t,e,r,i){if(t){var o,s=0,a=i.context,u=i.listeners;if(e||r||a){for(var c=e?[e]:n.keys(t);s<c.length;s++){e=c[s];var l=t[e];if(!l)break;for(var h=[],f=0;f<l.length;f++){var d=l[f];r&&r!==d.callback&&r!==d.callback._callback||a&&a!==d.context?h.push(d):(o=d.listening,o&&0===--o.count&&(delete u[o.id],delete o.listeningTo[o.objId]))}h.length?t[e]=h:delete t[e]}return n.size(t)?t:void 0}for(var p=n.keys(u);s<p.length;s++)o=u[p[s]],delete u[o.id],delete o.listeningTo[o.objId]}};l.once=function(t,e,r){var i=f(v,{},t,e,n.bind(this.off,this));return this.on(i,void 0,r)},l.listenToOnce=function(t,e,r){var i=f(v,{},e,r,n.bind(this.stopListening,this,t));return this.listenTo(t,i)};var v=function(t,e,r,i){if(r){var o=t[e]=n.once(function(){i(e,o),r.apply(this,arguments)});o._callback=r}return t};l.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),r=0;e>r;r++)n[r]=arguments[r+1];return f(w,this._events,t,void 0,n),this};var w=function(t,e,n,r){if(t){var i=t[e],o=t.all;i&&o&&(o=o.slice()),i&&m(i,r),o&&m(o,[e].concat(r))}return t},m=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}};l.bind=l.on,l.unbind=l.off,n.extend(e,l);var y=e.Model=function(t,e){var r=t||{};e||(e={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(y.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes);
},set:function(t,e,r){if(null==t)return this;var i;if("object"==typeof t?(i=t,r=e):(i={})[t]=e,r||(r={}),!this._validate(i,r))return!1;var o=r.unset,s=r.silent,a=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,l=this.changed,h=this._previousAttributes;for(var f in i)e=i[f],n.isEqual(c[f],e)||a.push(f),n.isEqual(h[f],e)?delete l[f]:l[f]=e,o?delete c[f]:c[f]=e;if(this.id=this.get(this.idAttribute),!s){a.length&&(this._pending=r);for(var d=0;d<a.length;d++)this.trigger("change:"+a[d],this,c[a[d]],r)}if(u)return this;if(!s)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e=this._changing?this._previousAttributes:this.attributes,r={};for(var i in t){var o=t[i];n.isEqual(e[i],o)||(r[i]=o)}return n.size(r)?r:!1},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,r=t.success;return t.success=function(n){var i=t.parse?e.parse(n,t):n;return e.set(i,t)?(r&&r.call(t.context,e,n,t),void e.trigger("sync",e,n,t)):!1},U(this,t),this.sync("read",this,t)},save:function(t,e,r){var i;null==t||"object"==typeof t?(i=t,r=e):(i={})[t]=e,r=n.extend({validate:!0,parse:!0},r);var o=r.wait;if(i&&!o){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var s=this,a=r.success,u=this.attributes;r.success=function(t){s.attributes=u;var e=r.parse?s.parse(t,r):t;return o&&(e=n.extend({},i,e)),e&&!s.set(e,r)?!1:(a&&a.call(r.context,s,t,r),void s.trigger("sync",s,t,r))},U(this,r),i&&o&&(this.attributes=n.extend({},u,i));var c=this.isNew()?"create":r.patch?"patch":"update";"patch"!==c||r.attrs||(r.attrs=i);var l=this.sync(c,this,r);return this.attributes=u,l},destroy:function(t){t=t?n.clone(t):{};var e=this,r=t.success,i=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){i&&o(),r&&r.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var s=!1;return this.isNew()?n.defer(t.success):(U(this,t),s=this.sync("delete",this,t)),i||o(),s},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||H();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.defaults({validate:!0},t))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return r?(this.trigger("invalid",this,r,n.extend(e,{validationError:r})),!1):!0}});var b={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};a(y,b,"attributes");var j=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},E={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},_=function(t,e,n){n=Math.min(Math.max(n,0),t.length);for(var r=Array(t.length-n),i=e.length,o=0;o<r.length;o++)r[o]=t[o+n];for(o=0;i>o;o++)t[o+n]=e[o];for(o=0;o<r.length;o++)t[o+i+n]=r[o]};n.extend(j.prototype,l,{model:y,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,x))},remove:function(t,e){e=n.extend({},e);var r=!n.isArray(t);t=r?[t]:n.clone(t);var i=this._removeModels(t,e);return!e.silent&&i&&this.trigger("update",this,e),r?i[0]:i},set:function(t,e){if(null!=t){e=n.defaults({},e,E),e.parse&&!this._isModel(t)&&(t=this.parse(t,e));var r=!n.isArray(t);t=r?[t]:t.slice();var i=e.at;null!=i&&(i=+i),0>i&&(i+=this.length+1);for(var o,s=[],a=[],u=[],c={},l=e.add,h=e.merge,f=e.remove,d=!1,p=this.comparator&&null==i&&e.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,v=0;v<t.length;v++){o=t[v];var w=this.get(o);if(w){if(h&&o!==w){var m=this._isModel(o)?o.attributes:o;e.parse&&(m=w.parse(m,e)),w.set(m,e),p&&!d&&(d=w.hasChanged(g))}c[w.cid]||(c[w.cid]=!0,s.push(w)),t[v]=w}else l&&(o=t[v]=this._prepareModel(o,e),o&&(a.push(o),this._addReference(o,e),c[o.cid]=!0,s.push(o)))}if(f){for(v=0;v<this.length;v++)o=this.models[v],c[o.cid]||u.push(o);u.length&&this._removeModels(u,e)}var y=!1,b=!p&&l&&f;if(s.length&&b?(y=this.length!=s.length||n.some(this.models,function(t,e){return t!==s[e]}),this.models.length=0,_(this.models,s,0),this.length=this.models.length):a.length&&(p&&(d=!0),_(this.models,a,null==i?this.length:i),this.length=this.models.length),d&&this.sort({silent:!0}),!e.silent){for(v=0;v<a.length;v++)null!=i&&(e.index=i+v),o=a[v],o.trigger("add",o,this,e);(d||y)&&this.trigger("sort",this,e),(a.length||u.length)&&this.trigger("update",this,e)}return r?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t){var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]}},at:function(t){return 0>t&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var r=e.length;return n.isFunction(e)&&(e=n.bind(e,this)),1===r||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=n.extend({parse:!0},t);var e=t.success,r=this;return t.success=function(n){var i=t.reset?"reset":"set";r[i](n,t),e&&e.call(t.context,r,n,t),r.trigger("sync",r,n,t)},U(this,t),this.sync("read",this,t)},create:function(t,e){e=e?n.clone(e):{};var r=e.wait;if(t=this._prepareModel(t,e),!t)return!1;r||this.add(t,e);var i=this,o=e.success;return e.success=function(t,e,n){r&&i.add(t,n),o&&o.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?n.clone(e):{},e.collection=this;var r=new this.model(t,e);return r.validationError?(this.trigger("invalid",this,r.validationError,e),!1):r},_removeModels:function(t,e){for(var n=[],r=0;r<t.length;r++){var i=this.get(t[r]);if(i){var o=this.indexOf(i);this.models.splice(o,1),this.length--,e.silent||(e.index=o,i.trigger("remove",i,this,e)),n.push(i),this._removeReference(i,e)}}return n.length?n:!1},_isModel:function(t){return t instanceof y},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){if("add"!==t&&"remove"!==t||n===this){if("destroy"===t&&this.remove(e,r),"change"===t){var i=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);i!==o&&(null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=e))}this.trigger.apply(this,arguments)}}});var T={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};a(j,T,"models");var S=e.View=function(t){this.cid=n.uniqueId("view"),n.extend(this,n.pick(t,k)),this._ensureElement(),this.initialize.apply(this,arguments)},O=/^(\S+)\s*(.*)$/,k=["model","collection","el","id","attributes","className","tagName","events"];n.extend(S.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var r=t[e];if(n.isFunction(r)||(r=this[r]),r){var i=e.match(O);this.delegate(i[1],i[2],n.bind(r,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,r,i){var o=A[t];n.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:o,dataType:"json"};if(i.url||(s.url=n.result(r,"url")||H()),null!=i.data||!r||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",i.emulateJSON&&(s.data._method=o);var a=i.beforeSend;i.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===s.type||i.emulateJSON||(s.processData=!1);var u=i.error;i.error=function(t,e,n){i.textStatus=e,i.errorThrown=n,u&&u.call(i.context,t,e,n)};var c=i.xhr=e.ajax(n.extend(s,i));return r.trigger("request",r,c,i),c};var A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var C=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},P=/\((.*?)\)/g,I=/(\(\?)?:\w+/g,L=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,l,{initialize:function(){},route:function(t,r,i){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return e.history.route(t,function(n){var s=o._extractParameters(t,n);o.execute(i,s,r)!==!1&&(o.trigger.apply(o,["route:"+r].concat(s)),o.trigger("route",r,s),e.history.trigger("route",o,r,s))}),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(M,"\\$&").replace(P,"(?:$1)?").replace(I,function(t,e){return e?t:"([^/?]+)"}).replace(L,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return n.map(r,function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null})}});var D=e.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},N=/^[#\/]|\s+$/g,$=/^\/+|\/+$/g,R=/#.*$/;D.started=!1,n.extend(D.prototype,l,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(N,"")},start:function(t){if(D.started)throw new Error("Backbone.history has already been started");if(D.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace($,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};return this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return this.matchRoot()?(t=this.fragment=this.getFragment(t),n.some(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})):!1},navigate:function(t,e){if(!D.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;(""===t||"?"===t.charAt(0))&&(n=n.slice(0,-1)||"/");var r=n+t;if(t=this.decodeFragment(t.replace(R,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;e.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),e.history=new D;var F=function(t,e){var r,i=this;r=t&&n.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,e);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,t&&n.extend(r.prototype,t),r.__super__=i.prototype,r};y.extend=j.extend=C.extend=S.extend=D.extend=F;var H=function(){throw new Error('A "url" property or function must be specified')},U=function(t,e){var n=e.error;e.error=function(r){n&&n.call(e.context,t,r,e),t.trigger("error",t,r,e)}};return e})}(),function(){!function(){"use strict";function t(e,r){function i(t,e){return function(){return t.apply(e,arguments)}}var o;if(r=r||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=r.touchBoundary||10,this.layer=e,this.tapDelay=r.tapDelay||200,this.tapTimeout=r.tapTimeout||700,!t.notNeeded(e)){for(var s=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,u=0,c=s.length;c>u;u++)a[s[u]]=i(a[s[u]],a);n&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,r){var i=Node.prototype.removeEventListener;"click"===t?i.call(e,t,n.hijacked||n,r):i.call(e,t,n,r)},e.addEventListener=function(t,n,r){var i=Node.prototype.addEventListener;"click"===t?i.call(e,t,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),r):i.call(e,t,n,r)}),"function"==typeof e.onclick&&(o=e.onclick,e.addEventListener("click",function(t){o(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!e,r=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,i=r&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=r&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(r&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var n,r;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),r=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},t.prototype.determineEventType=function(t){return n&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;r&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,n,o;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],r){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!i){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n?!0:!1},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,s,a,u,c,l=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,s=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(c=t.changedTouches[0],l=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),a=l.tagName.toLowerCase(),"label"===a){if(e=this.findControl(l)){if(this.focus(l),n)return!1;l=e}}else if(this.needsFocus(l))return t.timeStamp-s>100||r&&window.top!==window&&"input"===a?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,t),r&&"select"===a||(this.targetElement=null,t.preventDefault()),!1);return r&&!i&&(u=l.fastClickScrollParent,u&&u.fastClickLastScrollTop!==u.scrollTop)?!0:(this.needsClick(l)||(t.preventDefault(),this.sendClick(l,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;n&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,r,i,o;if("undefined"==typeof window.ontouchstart)return!0;if(r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(r>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),i[1]>=10&&i[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction?!0:(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],o>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===t.style.touchAction||"manipulation"===t.style.touchAction?!0:!1)},t.attach=function(e,n){return new t(e,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t}()}(),function(){!function(){"use strict";function t(e,n,r){return("string"==typeof n?n:n.toString()).replace(e.define||o,function(t,n,i,o){return 0===n.indexOf("def.")&&(n=n.substring(4)),n in r||(":"===i?(e.defineParams&&o.replace(e.defineParams,function(t,e,i){r[n]={arg:e,text:i}}),n in r||(r[n]=o)):new Function("def","def['"+n+"']="+o)(r)),""}).replace(e.use||o,function(n,i){e.useParams&&(i=i.replace(e.useParams,function(t,e,n,i){if(r[n]&&r[n].arg&&i){var o=(n+":"+i).replace(/'|\\/g,"_");return r.__exp=r.__exp||{},r.__exp[o]=r[n].text.replace(new RegExp("(^|[^\\w$])"+r[n].arg+"([^\\w$])","g"),"$1"+i+"$2"),e+"def.__exp['"+o+"']"}}));var o=new Function("def","return "+i)(r);return o?t(e,o,r):o})}function e(t){return t.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var n,r={version:"1.0.3",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0};r.encodeHTMLSource=function(t){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=t?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(t){return t?t.toString().replace(n,function(t){return e[t]||t}):""}},n=function(){return this||(0,eval)("this")}(),"undefined"!=typeof module&&module.exports?module.exports=r:"function"==typeof define&&define.amd?define(function(){return r}):n.doT=r;var i={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},o=/$^/;r.template=function(s,a,u){a=a||r.templateSettings;var c,l,h=a.append?i.append:i.split,f=0,d=a.use||a.define?t(a,s,u||{}):s;d=("var out='"+(a.strip?d.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):d).replace(/'|\\/g,"\\$&").replace(a.interpolate||o,function(t,n){return h.start+e(n)+h.end}).replace(a.encode||o,function(t,n){return c=!0,h.startencode+e(n)+h.end}).replace(a.conditional||o,function(t,n,r){return n?r?"';}else if("+e(r)+"){out+='":"';}else{out+='":r?"';if("+e(r)+"){out+='":"';}out+='"}).replace(a.iterate||o,function(t,n,r,i){return n?(f+=1,l=i||"i"+f,n=e(n),"';var arr"+f+"="+n+";if(arr"+f+"){var "+r+","+l+"=-1,l"+f+"=arr"+f+".length-1;while("+l+"<l"+f+"){"+r+"=arr"+f+"["+l+"+=1];out+='"):"';} } out+='"}).replace(a.evaluate||o,function(t,n){return"';"+e(n)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),c&&(a.selfcontained||!n||n._encodeHTML||(n._encodeHTML=r.encodeHTMLSource(a.doNotSkipEncoded)),d="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+r.encodeHTMLSource.toString()+"("+(a.doNotSkipEncoded||"")+"));"+d);try{return new Function(a.varname,d)}catch(p){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+d),p}},r.compile=function(t,e){return r.template(t,null,e)}}()}(),function(){"use strict";function e(){this.queue=[],this.index=0,this.deferred=n.Deferred()}var n=t["/www/js/lib/jbone.js"]||window.$;e.prototype={push:function(t){this.queue.push(t)},getNext:function(){return this.queue[this.index++]},canNext:function(){return this.queue.length>this.index},run:function(){var t,e=this;return e.canNext()?(t=e.getNext()(),t&&t.always?t.always(e.run.bind(e)):e.run(),e.deferred.promise()):e.end()},end:function(){return this.deferred.resolve()}},t["/www/js/lib/queue.js"]=e}(),function(){"use strict";var e,n=t["/www/js/lib/backbone.js"]||window.Backbone,r=t["/www/js/services/mediator.js"]||window.mediator,i=(t["/www/js/services/log.js"]||window.log,window),o=i.document,s=o.documentElement,a=n.Model.extend({defaults:{width:0,height:0,orientation:"",minScreenSize:153600},eventTypes:{down:["mousedown","touchstart"],move:["mousemove","touchmove"],up:["mouseup","touchend"]},events:{},mapEventType:{mousedown:"down",touchstart:"down",mousemove:"move",touchmove:"move",mouseup:"up",touchend:"up"},initialize:function(){var t=this;t.clearLogMoving(),t.clearLogDown(),t.collectInfo(),t.setPointData({x:0,y:0,scale:1}),t.bindEventListeners(),r.installTo(t),t.onResize()},collectInfo:function(){var t=this,e="ontouchstart"in o,n=Number(e),r=t.eventTypes,i=t.events;t.set("isTouch",e),_.each(r,function(t,e){i[e]=t[n]})},bindEventListeners:function(){var t=this,e=t.events,n=o.body;i.addEventListener("resize",function(){t.onResize()},!1),n.addEventListener(e.down,function(e){t.onDown(e)},!1),n.addEventListener(e.move,function(e){t.onMove(e)},!1),n.addEventListener(e.up,function(e){t.onUp(e)},!1),t.on("change:actionIsActive",function(t,e){t.publish("deviceAction:isActive",e,t.logMovingGetLast())})},getEvents:function(t){var e=this,n={events:[],length:0,type:""},r=t.touches||[t];return n.length=r.length,n.type=e.mapEventType[t.type],_.each(r,function(t){n.events.push({x:t.clientX,y:t.clientY})}),n},getAverageXY:function(t){var e=0,n=0,r=t.length;return _.each(t,function(t){e+=t.x,n+=t.y}),{x:e/r,y:n/r}},logDown:function(t){var e,n=this,r=n.get("log-down");1===t.length&&(r.length>10&&r.shift(),e=t.events[0],r.push({x:e.x,y:e.y,timeStamp:Date.now()}))},clearLogDown:function(){return this.set("log-down",[])},logMoving:function(t){var e=this,n=e.get("log-moving");n.length>10&&n.shift(),n.push({x:t.x,y:t.y,timeStamp:Date.now()})},clearLogMoving:function(){return this.set("log-moving",[])},logMovingGetLast:function(){var t=this.get("log-moving");return t[t.length-1]},getPinchData:function(t){var e,n,r,i,o,s=this,a=s.get("pinchStartEvents"),u=a[0],c=a[1],l=u.x,h=u.y,f=c.x,d=c.y,p=f-l,g=d-h,v=t[0],w=t[1],m=v.x,y=v.y,b=w.x,j=w.y,E=b-m,x=j-y;return e=Math.pow(l-f,2)+Math.pow(h-d,2),e=Math.pow(e,.5),n=Math.pow(m-b,2)+Math.pow(y-j,2),n=Math.pow(n,.5),r=Math.atan2(g,p),i=Math.atan2(x,E),o=180*(i-r)/Math.PI,{scale:n/e||1,deltaAngle:o}},setPointData:function(t){var e=this;return t.hasOwnProperty("x")&&e.set("pointDataX",t.x),t.hasOwnProperty("y")&&e.set("pointDataY",t.y),t.hasOwnProperty("scale")&&e.set("pointDataScale",t.scale),e},getPointData:function(){var t=this;return{x:t.get("pointDataX"),y:t.get("pointDataY"),scale:t.get("pointDataScale")}},onDown:function(t){var e=this,n=e.getEvents(t),r=e.getAverageXY(n.events),i=e.getPointData();e.set("startDownEventXY",r),e.set("startPointData",i),
e.set("currentPointData",i),e.clearLogMoving(),e.logMoving(r),e.logDown(n),e.set("actionIsActive",!0),2===n.length?(e.set("pinchIsActive",!0),e.set("pinchStartEvents",n.events)):e.set("pinchIsActive",!1)},onMove:function(t){if(!this.get("actionIsActive"))return!1;var e,n,r,i,o,s,a=this,u=a.getEvents(t),c=a.getAverageXY(u.events),l=a.get("currentPointData"),h=a.get("log-moving"),f=h[h.length-1];i=c.x-f.x,n=l.x+i,o=c.y-f.y,r=l.y+o,a.set("currentPointData",{x:n,y:r}),a.get("pinchIsActive")?(e=a.getPinchData(u.events),s=e.scale,a.setPointData({x:n*s,y:r*s,scale:s})):a.setPointData({x:n,y:r}),a.publish("deviceAction:moving",{x:c.x,y:c.y,dx:i,dy:o}),a.logMoving(c)},onUp:function(t){var e=this,n=e.getEvents(t),r=n.events,i=r.length,o=e.get("isTouch"),s=e.get("pinchIsActive");return!i&&o&&s?(e.set("pinchIsActive",!1),e.set("actionIsActive",!1),void e.checkDblTap()):i&&o?void(1===i&&o&&(e.set("pinchIsActive",!1),e.onDown(t))):(e.set("actionIsActive",!1),e.checkDblTap(),void e.clearLogMoving())},checkDblTap:function(){var t=this,e=t.get("log-down"),n=e.length,r=e[n-1],i=e[n-2];2>n||r.timeStamp-i.timeStamp>300||Math.abs(r.x-i.x)>10||Math.abs(r.y-i.y)>10||t.publish("deviceAction:dblTap",r)},onResize:function(){var t=this,e=s.clientWidth,n=s.clientHeight,r=e>n?"-":"|",i={width:e,height:n,orientation:r,spaceSize:e*n};t.set(i),t.trigger("resize"),t.publish("resize",i)}});e=new a,t["/www/js/services/device.js"]=e}(),function(){"use strict";var e=t["/www/js/services/info.js"]||window.info,n=(window,{attr:{},minShowPeriod:12e4,set:function(t,e){return this.attr[t]=e,this},get:function(t){return this.attr[t]},showAd:function(){var t,e,n=this;n.get("adsIsAvailable")&&(t=Date.now(),e=n.get("lastShow")||0,t-e>=n.minShowPeriod&&(n.set("lastShow",t),Android.displayInterstitial()))},init:function(){var t=this;t.showAd=t.showAd.bind(t),t.set("adsIsAvailable","undefined"!=typeof Android&&e.isNormal)}});n.init(),t["/www/js/services/android-ads.js"]=n}(),function(){"use strict";var e={language:"Language",languageName:"English",shortLanguageName:"Eng",appName:"Tangram-2",newVersionIsAvailable:"A new version of this app is available. Load it?",notification:{},rateUs:{header:"If you like out app, please rate it. Thanks!",rateNow:"Rate Now",remindMeLater:"Remind Me Later",noThanks:"No, Thanks"},menu:"menu",exit:"exit",reset:"reset","play-regular":"play regular","play-master":"play master",sections:"sections",tangram:"tangram",person:"person",animal:"animal",settings:"settings","tangram-texture":"tangram texture"};t["/www/js/i18n/en.js"]=e}(),function(){"use strict";var e={language:"Язык",languageName:"Русский",shortLanguageName:"Рус",appName:"Танграм-2",notification:{},rateUs:{header:"Если Вам понравилось наше приложение, пожалуйста, оцените его. Спасибо!",rateNow:"Оценить",remindMeLater:"Напомнить позже",noThanks:"Нет, спасибо"},tangram:"танграм",person:"человечки"};t["/www/js/i18n/ru.js"]=e}(),function(){"use strict";var e=t["/www/js/services/info.js"]||window.info,n=t["/www/js/i18n/en.js"]||window.en,r=t["/www/js/i18n/ru.js"]||window.ru,i={attr:{},languages:{en:n,ru:r},set:function(t){this.attr=this.languages[t]},get:function(t){return t?this.attr[t]:this.attr}};i.set(e.get("language")),t["/www/js/services/lang.js"]=i}(),function(){"use strict";var e=t["/www/js/lib/dot.js"]||window.doT,n=window.document,r={templateSelector:".js-template",mainJsSelector:".js-main-js",tmplText:{},tmplFn:{},init:function(){var t=this,r=n.querySelectorAll(t.templateSelector),i=n.querySelector(t.mainJsSelector);return Array.prototype.forEach.call(r,function(n){var r=n.getAttribute("data-name"),i=n.textContent.replace(/\<\!\-\-[\s\S]+?\-\-\>/gi,"").trim();t.tmplText[r]=i,t.tmplFn[r]=e.template(i),n.parentNode.removeChild(n)}),i&&i.parentNode.removeChild(i)},get:function(t){return this.tmplFn[t]}};r.init(),t["/www/js/services/template-master.js"]=r}(),function(){"use strict";var e=window,n={toArray:function(t){return Array.prototype.slice.call(t)},arrayRemoveByValue:function(t,e){var n=t.indexOf(e);return-1!==n&&t.splice(n,1),t},getBetween:function(t,e,n){return e=Math.min(e,n),e=Math.max(e,t)},getRandomBetween:function(t,e){return Math.floor(Math.random()*(e-t)+t)},toTop:function(){e.scrollTo(0,0)},copyJSON:function(t){return JSON.parse(JSON.stringify(t))},formatTime:function(t){return t>=10?t:"0"+t},formatMs:function(t){var e=this,n=new Date(t);return{d:e.formatTime(n.getUTCDate()),h:e.formatTime(n.getUTCHours()),m:e.formatTime(n.getUTCMinutes()),s:e.formatTime(n.getUTCSeconds()),ms:e.formatTime(n.getUTCMilliseconds())}},loadImage:function(t){var e=$.Deferred(),n=$(new Image);return n.one("load",function(t){e.resolve(t.currentTarget),n.off()}),n.one("error",function(t){e.reject(t),n.off()}),n.attr("src",t),e.promise()},loadImages:function(t){var e=this.loadImage,n=new Queue;return t.forEach(function(t){n.push(function(){return e(t)})}),n.run()}};t["/www/js/services/util.js"]=n}(),function(){"use strict";var e=window,n={pathPrefix:"www/",init:function(){},play:function(t){var n=this,r=t.road,i=t.isLoop,o=t.sound,s=n.pathPrefix+o,a=e["AndAud_"+r];i?a.playAudioLooping(s):a.playAudio(s)},stop:function(t){var n=t.road,r=e["AndAud_"+n];r.stop()}};t["/www/js/sound/player-android.js"]=n}(),function(){"use strict";var e=(window,{roads:new Array(4),pathPrefix:"",init:function(){},play:function(t){var e,n=this,r=t.road,i=t.isLoop,o=t.sound,s={playAudioWhenScreenIsLocked:!1};n.stop(t),e=new Media(n.pathPrefix+o),i&&(s.numberOfLoops=9),e.play(s),n.roads[r]=e},stop:function(t){var e=this,n=t.road,r=e.roads[n];r&&r.release&&(e.roads[n].stop(),e.roads[n].release())}});t["/www/js/sound/player-ios.js"]=e}(),function(){"use strict";var e=t["/www/js/services/info.js"]||window.info,n=(window,{roads:void 0,pathPrefix:"",init:function(){var t=this;t.roads=new Array(4).map(function(){return new Audio})},play:function(t){var n,r=this,i=t.road,o=t.isLoop,s=t.sound;r.stop(t),n=new Audio,o&&n.addEventListener("ended",function(){if("off"!==e.get("music")){var t=this;t.currentTime=0,t.play()}},!1),n.addEventListener("canplay",function(){if("off"!==e.get("music")){var t=this;t.play()}}),r.roads[i].src="",r.roads[i]=n,n.src=r.pathPrefix+s},stop:function(t){var e=this,n=t.road,r=e.roads[n];r&&r.pause&&r.pause(),r&&r.currentTime&&r.currentTime<.1&&(r.currentTime=0)}});t["/www/js/sound/player-web.js"]=n}(),function(){"use strict";var e=t["/www/js/sound/player-android.js"]||window.androidPlayer,n=t["/www/js/sound/player-ios.js"]||window.iosPlayer,r=t["/www/js/sound/player-web.js"]||window.webPlayer,i=t["/www/js/services/info.js"]||window.info,o=window,s={init:function(){var t=this;t.initPlayers(),o.addEventListener("hashchange",t.playBgSound.bind(t),!1)},roads:[{},{},{},{}],initPlayers:function(){var t,i=this,s=o.AndAud_0,a=o.Media;s&&(t=e),a&&(t=n),t=t||r,t.init(),i.player=t},getPlayer:function(){return this.player},playBgSound:function(){var t=this,e=t.getCurrentBgSound();e&&t.play({sound:e,isLoop:!0,road:0})},getCurrentBgSound:function(){return!1},play:function(t){var e=this,n=e.getPlayer(),r=e.roads[t.road],o=JSON.stringify(t),s=JSON.stringify(r);o===s&&t.isLoop||(e.stop(t),e.roads[t.road]=JSON.parse(o),"off"!==i.get("music")&&n.play(t))},stop:function(t){var e=this,n=e.getPlayer();n.stop(t)},stopBgSound:function(){var t=this,e=t.roads[0];t.stop(e)},restoreBgSound:function(){var t=this,e=JSON.parse(JSON.stringify(t.roads[0]));t.roads[0]={},t.play(e)}};s.init(),t["/www/js/sound/sound-master.js"]=s}(),function(){"use strict";var e=t["/www/js/lib/backbone.js"]||window.Backbone,n=t["/www/js/lib/jbone.js"]||window.$,r=t["/www/js/lib/lodash.js"]||window._,i=t["/www/js/services/info.js"]||window.info,o=t["/www/js/services/util.js"]||window.util,s=t["/www/js/services/mediator.js"]||window.mediator,a=t["/www/js/sound/sound-master.js"]||window.sm,u=t["/www/js/services/lang.js"]||window.lang,c=t["/www/js/services/device.js"]||window.device,l=t["/www/js/services/log.js"]||window.log,h=window,f=h.document,d=f.documentElement,p=e.View.extend({events:{"click [data-sound]":"playSound","click [data-route]":"routeTo","click .js-back":"routeBack","click .js-external-link":"toExternalLink","click .js-stop-event":"stopEvent",hide:"hide","click .js-hide-popup":"hidePopupByRouter","touchstart .js-scroll-area-container":"touchStartAutoScroll","click .js-list-backward[data-group-name]":"changeSelect","click .js-list-changed-item[data-group-name]":"changeSelect","click .js-list-forward[data-group-name]":"changeSelect","click .js-tab-button":"tabAction","click .js-tab-close":"tabClose"},extraEvents:{noScroll:["mousewheel","touchmove","gesturestart","gesturechange","gestureend"]},selectors:{wrapper:".js-wrapper",verticalSwiper:".js-scroll-container",noScroll:".js-no-scroll"},eventTypes:{down:["mousedown","touchstart"],move:["mousemove","touchmove"],up:["mouseup","touchend"]},initStatic:function(){var t,e=this,o=c.get("isTouch"),s=Number(o),a=e.eventTypes;e.constructor.prototype.$wrapper=n(e.selectors.wrapper),t=Math.round(14*Math.pow(d.clientWidth*d.clientHeight/153600,.5)),t=Math.min(t,24),t=Math.max(t,14),t=2*Math.round(t/2),d.style.fontSize=t+"px",i.set("remSize",t,!0),r.each(a,function(t,e){a[e]=t[s]}),n(f.body).on("contextmenu",e.stopEvent),e.listenTo(c,"resize",function(){e.resizeWrapper()}),e.resizeWrapper()},resizeWrapper:function(){this.constructor.prototype.$wrapper.css({width:c.get("width")+"px",height:c.get("height")+"px"})},constructor:function(){var t=this,i=p.prototype,o={},a=i.extraEvents.noScroll,u=i.selectors.noScroll;return t.events=n.extend({},i.events,t.events),r.each(t.events,function(e,n){o[t.getFullEventNameAndSelector(n)]=e}),r.each(a,function(t){o[t+" "+u]="stopEvent"}),"stopEvent"===o.scroll&&(o.scroll=null,delete o.scroll,r.each(a,function(t){o[t]="preventDefaultEvent"})),t.events=o,t.selectors=n.extend({},i.selectors,t.selectors),t.attr={},s.installTo(t),e.View.prototype.constructor.apply(t,arguments)},getFullEventNameAndSelector:function(t){var e=this,n=t.split(" "),r=e.eventTypes[n[0]];return r?[r,n[1]].join(" "):t},changeSelect:function(t){var e,r=n(t.currentTarget),i=r.hasClass("js-list-backward")?-1:1,o=r.attr("data-group-name"),s=this.$el.find('.js-list-changed-item[data-full-list][data-group-name="'+o+'"]'),a=JSON.parse(decodeURI(s.attr("data-full-list"))),u=a.length,c=s.attr("data-key"),l=0;a.every(function(t,e){return t.key.toString()===c?(l=e+i,!1):!0}),0>l&&(l=u-1),l>=u&&(l=0),e=a[l],s.attr("data-key",e.key),s.attr("data-value",e.value),s.html(e.value),s.trigger("change")},destroyView:function(){var t=this;return t.$el.remove().empty(),t.remove(),t.unbind(),e.View.prototype.remove.call(t)},hide:function(){l("base view hide");var t=this,e=t.$el,r=i.get("animationEnd",!0),o="on"===i.get("screenAnimation"),a=n.Deferred();return t.empty(),t.unsubscribe(),s.uninstallFrom(t),t.undelegateEvents(),t.unbindEventListeners&&t.unbindEventListeners(),o&&e.hasClass("show-view-animation")?(e.one(r,function(){t.destroyView(),a.resolve()}),e.addClass("hide-view-animation")):(t.destroyView(),a.resolve()),a.promise()},render:function(){var t=this;return t.publish("hide-main-view"),t.subscribe("hide-main-view",t.hide),t.$wrapper.append(t.$el),t.showAppearAnimation()},showAppearAnimation:function(){var t=this,e="on"===i.get("screenAnimation"),r=t.$el,o=n.Deferred(),s=i.get("animationEnd",!0);return e?(r.one(s,function(){o.resolve()}),r.addClass("show-view-animation")):(r.addClass("show-view-no-animation"),o.resolve()),o.promise()},routeTo:function(t){var e=this,r=n(t.currentTarget),i=r.attr("data-route");e.publish("navigate",i,!0)},routeBack:function(t){this.stopEvent(t),h.location.hash&&e.history.history.back()},backTo:function(t){var n=this;!function r(){h.setTimeout(function(){e.history.fragment!==t&&e.history.fragment&&(n.routeBack(),r())},10)}()},showPopup:function(t){var e=this,r=n.Deferred(),i={};return e.hidePopupByRouter(),e.publish("show-popup",t,i),i.view.set("deferred",r),r.promise()},hidePopupByRouter:function(){this.publish("router-hide-popup")},isPopupExist:function(){var t=this,e=h.location.href,n=t.popupUrl;return-1!==e.indexOf(n)},stopEvent:function(t){t&&(t.preventDefault(),t.stopPropagation())},preventDefaultEvent:function(t){t&&t.preventDefault()},toExternalLink:function(t){var e=this,r=n(t.currentTarget),i=r.attr("data-need-confirm"),o=r.attr("data-href");return e.stopEvent(t),"yes"===i?e.needConfirmLinkPrompt({url:o}):void h.open(o)},needConfirmLinkPrompt:function(t){var e,n,r=this,i=o.getRandomBetween,s=i(5,9),a=i(5,9),u=s+a,c=[];for(a>s&&(a=[s,s=a][0]),e=0,n=6;n>e;e+=1)c[e]=u+e-4;return r.showPopup({name:"need-confirm",data:{a:s,b:a,answer:u,answers:o.assortArray(c),url:t.url}})},checkConnection:function(){var t=n.Deferred(),e="https://www.google.com/favicon.ico?"+Date.now(),r=n('<img alt=""/>');return r.on("load",function(){n(this).off().remove(),t.resolve()}),r.on("error",function(){n(this).off().remove(),t.reject()}),r.attr("src",e),t.promise()},rateUsPopup:function(){var t=this,e=i.get("rate-us")||{},n=Date.now(),r=e.lastShow,o=e.lastNoThanks,a=e.lastRateNow,c=864e5,f=2*c;return n-i.get("installTime")<6e4?void l("do not show if user use app less than a minute"):r&&c>n-r?void l("do not show popup too often"):a?void l("rate by rate now"):void(o&&f>n-r||t.checkConnection().done(function(){return-1!==h.location.hash.indexOf("show-popup=popup")?void l("popup is open"):(e.lastShow=n,i.set("rate-us",e),void s.publish("show-popup",{name:"rate-us",extraEvents:[{selector:".js-rate-us-rate-now",event:"click",fn:function(){var t=i.get("rate-us")||{};t.lastRateNow=Date.now(),i.set("rate-us",t)}},{selector:".js-rate-us-no-thanks",event:"click",fn:function(){var t=i.get("rate-us")||{};t.lastNoThanks=Date.now(),i.set("rate-us",t)}}],data:{lang:u,url:i.getLinkToStore()}}))}))},loadUrl:function(){e.history.loadUrl()},changeBy:function(t,e){return this.set(t,this.get(t)+e)},set:function(t,e){var n=this,r=n.attr;return"string"==typeof t?(r[t]=e,n):(Object.keys(t).forEach(function(e){this[e]=t[e]},r),n)},get:function(t){return this.attr[t]},empty:function(){return this.attr={},this},extendFromObj:function(t){r.extend(this.attr,t)},setVerticalSwiper:function(){var t,e=this,n=e.$el;n.find(".swiper-slide").css("height","auto"),t=new Swiper(n.find(e.selectors.verticalSwiper),{scrollbar:".swiper-scrollbar",direction:"vertical",slidesPerView:"auto",mousewheelControl:!0,freeMode:!0}),e.set("vertical-swiper",t)},scrollToTop:function(){f.body.scrollTop=0},touchStartAutoScroll:function(t){if(i.get("isIOS",!0)){var e,n,r,o=t.currentTarget,s=o.querySelector(":scope > div"),a=o.scrollTop;if(0>=a)return void(o.scrollTop=1);e=o.clientHeight,n=s.clientHeight,r=n-e,a>=r&&(o.scrollTop=r-1)}},tabAction:function(t){var e=this,r=e.$el,i=n(t.currentTarget),o=i.attr("data-tab-id"),s=i.attr("data-tab-state"),a="tab-button-",u=".js-tab-block",c=".js-tab-button",l=r.find(u+'[data-tab-id="'+o+'"]'),h=r.find(u),f=r.find(c);h.addClass("hidden"),f.addClass(a+"close").removeClass(a+"open").attr("data-tab-state","close"),"close"===s&&(i.attr("data-tab-state","open").removeClass(a+"close").addClass(a+"open"),l.removeClass("hidden"))},tabClose:function(){var t=this,e=t.$el,n="tab-button-",r=".js-tab-block",i=".js-tab-button",o=e.find(r),s=e.find(i);o.addClass("hidden"),s.addClass(n+"close").removeClass(n+"open").attr("data-tab-state","close")},playSound:function(t){var e=n(t.currentTarget),r=e.attr("data-sound");a.play({sound:r,road:3,isLoop:!1})}});t["/www/js/app/view/core/base.js"]=p}(),function(){"use strict";var e=t["/www/js/app/view/core/base.js"]||window.BaseView,n=t["/www/js/services/template-master.js"]||window.tm,r=t["/www/js/services/info.js"]||window.info,i=(t["/www/js/services/log.js"]||window.log,t["/www/js/lib/jbone.js"]||window.$),o=25,s=e.extend({initialize:function(t){var i=this;return i.setElement(n.get("column")()),i.set({"$column-container":i.$el.find(".js-column-container"),transitionEnd:r.get("transitionEnd",!0),"column-size":t.columnSize}),e.prototype.initialize.apply(i,arguments)},spin:function(){var t=this;t.moveTo({stopIndex:t.get("stop-index"),type:"begin"}).done(function(){t.turn()})},stop:function(t){var e=this;e.set("state","spin-end")},turn:function(){var t=this,e=t.get("$column-container");e.off(),e.addClass("a-roll"),e.css({top:76*-t.get("stop-index")-o+"px"}),t.get("is-last")&&t.publish("game-model:set-state","spin-main"),e.on(r.get("animationIteration",!0),function(){"spin-end"===t.get("state")&&(e.removeClass("a-roll"),e.css({top:-o+"px"}),t.moveTo({stopIndex:t.get("stop-index"),isInstant:!0}),setTimeout(function(){t.moveTo({stopIndex:Math.floor(9*Math.random()),type:"end"})},0))})},moveTo:function(t){var e,n=this,r=i.Deferred(),s=t.stopIndex,a=t.isInstant,u=n.get("stop-index"),c=n.get("column-size"),l=n.get("transitionEnd"),h=n.get("$column-container");if(a)return h.css({transition:"none",transform:"translate3d(0,"+(76*-(s+c)-o)+"px,0)"}),n.set("stop-index",s),r.resolve();switch(t.type){case"begin":e="ease-in";break;case"end":e="ease-out";break;case"linear":e="linear";break;default:e="linear"}return u>s?(h.css({transition:"transform 1s "+e,transform:"translate3d(0,"+(76*-(s+c)-o)+"px,0)"}),h.one(l,function(){r.resolve()})):(h.css({transition:"transform 1s "+e,transform:"translate3d(0,"+(76*-s-o)+"px,0)"}),h.one(l,function(){h.css({transition:"none",transform:"translate3d(0,"+(76*-(s+c)-o)+"px,0)"}),r.resolve()})),n.set("stop-index",s),r.promise()}});t["/www/js/app/view/home/column-view.js"]=s}(),function(){"use strict";var e=t["/www/js/lib/backbone.js"]||window.Backbone,n=t["/www/js/app/view/home/column-view.js"]||window.ColumnView,r=e.Model.extend({initialize:function(){var t,e=this,r=e.get("column-size"),i=Math.floor(Math.random()*r);t=new n({columnSize:r}),e.set("view",t),t.moveTo({stopIndex:i,isInstant:!0})},spin:function(){var t=this;t.get("view").spin()},stop:function(){var t=this,e=Math.floor(9*Math.random());t.get("view").stop(e)}});t["/www/js/app/view/home/column-model.js"]=r}(),function(){"use strict";var e=(t["/www/js/app/view/core/base.js"]||window.BaseView,t["/www/js/lib/backbone.js"]||window.Backbone),n=t["/www/js/app/view/home/column-model.js"]||window.ColumnModel,r=9,i=e.Collection.extend({model:n,initialize:function(){var t=this;t.createColumns(6)},createColumn:function(){this.add({"column-size":r})},createColumns:function(t){var e,n=this;for(e=0;t>e;e+=1)n.createColumn(),n.last().get("view").set("is-last",e+1===t)},spin:function(){var t=this,e=0;t.each(function(t){e+=1,setTimeout(function(){t.spin()},333*e)})},stop:function(){var t=this,e=0;t.each(function(t){e+=1,setTimeout(function(){t.stop()},333*e)})}});t["/www/js/app/view/home/column-collection.js"]=i}(),function(){"use strict";var e=t["/www/js/lib/backbone.js"]||window.Backbone,n=t["/www/js/lib/jbone.js"]||window.$,r=t["/www/js/services/log.js"]||window.log,i=t["/www/js/services/mediator.js"]||window.mediator,o=e.Model.extend({defaults:{state:"idle"},initialize:function(){var t=this;i.installTo(t),t.bindEventListeners()},bindEventListeners:function(){var t=this;t.on("change:state",t.onChangeState),t.subscribe("game-model:set-state",t.setState)},onChangeState:function(){var t=this,e=t.get("state");r("model state is",e),"idle"===e||"spin-main"===e?n(".js-spin").removeClass("button-spin_disable"):n(".js-spin").addClass("button-spin_disable")},isState:function(t){return this.get("state")===t},setState:function(t){this.set("state",t)}});t["/www/js/app/view/home/game-model.js"]=o}(),function(){"use strict";var e=t["/www/js/app/view/core/base.js"]||window.BaseView,n=t["/www/js/services/template-master.js"]||window.tm,r=t["/www/js/app/view/home/column-collection.js"]||window.ColCollection,i=t["/www/js/app/view/home/game-model.js"]||window.GameModel,o=e.extend({events:{"click .js-spin":"spin"},initialize:function(){var t=this;return t.set("model",new i),t.setElement(n.get("home")()),t.set("column-collection",new r),t.render(),e.prototype.initialize.apply(t,arguments)},render:function(){var t=this,n=t.$el.find(".js-columns-wrapper");return t.get("column-collection").each(function(t){n.append(t.get("view").$el)}),e.prototype.render.apply(t,arguments)},spin:function(){var t=this,e=t.get("model");switch(e.get("state")){case"idle":t.get("column-collection").spin(),e.set("state","spin-begin");break;case"spin-main":t.get("column-collection").stop(),e.set("state","spin-end"),setTimeout(function(){e.set("state","idle"),t.get("column-collection").each(function(t){t.get("view").set("state","idle")})},3300)}}});t["/www/js/app/view/home/game-view.js"]=o}(),function(){"use strict";var e,n=t["/www/js/services/mediator.js"]||window.mediator,r=t["/www/js/lib/backbone.js"]||window.Backbone,i=t["/www/js/lib/lodash.js"]||window._,o=(t["/www/js/app/view/core/base.js"]||window.BaseView,t["/www/js/app/view/home/game-view.js"]||window.HomeView),s=window,a=r.Router.extend({routes:{"":"home"},home:function(){new o},url:{popup:"show-popup=popup"},getAction:function(){var t,e=this,n=window.event||{},r=n.newURL||"",i=n.oldURL||"",o=e.url.popup;return-1!==r.indexOf(o)&&(t="showPopup"),-1!==i.indexOf(o)&&(t="hidePopup"),t},constructor:function(){var t=this,e={},n=a.prototype;return i.each(t.routes,function(r){e[r]=n[r],n[r]=function(){var n=t.getAction();if(!n)return e[r].apply(t,arguments);switch(n){case"hidePopup":t.publish("hide-popup");break;case"showPopup":}}}),r.Router.prototype.constructor.apply(t,arguments)},routeToPopup:function(){this.navigate(r.history.fragment+"?"+this.url.popup,!1)},hidePopup:function(){var t=this;-1!==r.history.fragment.indexOf(t.url.popup)?s.history.back():t.publish("hide-popup")}});e=new a,n.installTo(e),e.subscribe("route-to-popup",e.routeToPopup),e.subscribe("router-hide-popup",e.hidePopup),e.subscribe("navigate",e.navigate),e.on("route",function(t,n){e.publish("route",t,n)}),t["/www/js/app/router/router.js"]=e}(),function(){"use strict";var e,n,r=t["/www/js/app/view/core/base.js"]||window.BaseView,i=t["/www/js/lib/jbone.js"]||window.$,o=t["/www/js/lib/lodash.js"]||window._,s=t["/www/js/services/lang.js"]||window.lang,a=t["/www/js/services/info.js"]||window.info,u=t["/www/js/services/device.js"]||window.device,c=t["/www/js/services/template-master.js"]||window.tm,l=t["/www/js/services/mediator.js"]||window.mediator,h=(window,{autoplay:{x1:.3,y1:0,width:4.9,height:3.7,submitType:"normal"},removeAds:{x1:-.3,y1:0,width:4.9,height:3.7,submitType:"normal"},thanksForBuy:{x1:-.3,y1:0,width:4.9,height:3.7,submitType:"normal"},showTitle:{x1:3.3,y1:.3,x2:-3.3,height:3,submitType:"normal"},showText:{x1:3,y1:10,x2:-3,y2:-11,submitType:"normal"},stopAndStartPlay:{x1:-.3,y1:0,width:3.7,height:3.6,submitType:"normal"}}),f="rem";e=r.extend({selectors:{hintFocus:".js-hint-focus",text:".js-hint-text",hintArrow:".js-hint-arrow"},events:{click:"hide",scroll:"stopEvent"},initialize:function(t){var e=this,n=t.name;e.extendFromObj(t),e.extendFromObj(h[n]),e.setElement(c.get("hint")({text:s.get("hint")[n]})),r.prototype.initialize.apply(e,arguments),e.bindEventListeners(),e.subscribe("hide-hint",e.hide),e.render()},render:function(){var t,e=this,n=e.$wrapper,r=a.get("isAndroid",!0);t=r?function(t,e){setTimeout(t,e)}:function(t){t()},e.setCoordinates({$hintFocus:e.$el.find(e.selectors.hintFocus),$text:e.$el.find(e.selectors.text),coordinates:h[e.get("name")]}),t(function(){n.append(e.$el)},50),t(function(){e.showInAnimation()},100)},showInAnimation:function(){var t=this,e="on"===a.get("screenAnimation");e?t.$el.addClass("hint-container-show-in"):t.$el.addClass("hint-container-show-in-no-animation")},showOutAnimation:function(){var t=this,e=t.$el,n=i.Deferred(),r=a.get("animationEnd",!0),o="on"===a.get("screenAnimation");return o&&e.hasClass("hint-container-show-in")?(e.one(r,function(){n.resolve()}),e.addClass("hint-container-show-out")):n.resolve(),n.promise()},setCoordinates:function(t){var e=this,n=e.getAllCoordinates(t);e.setFadeCoordinates({$hintFocus:t.$hintFocus,allCoordinates:n}),e.setHintCoordinates({$text:t.$text,allCoordinates:n})},setHintCoordinates:function(t){var e,n,r,i=this,o=12,s=o/2,a=t.allCoordinates,u=a.maxWidth,c=1,l=u-c,h=0;e=a.center.bottom.x-s,n=a.center.bottom.y,r=e+o,c>=e&&(h=c-e),r>=l&&(h=l-r),t.$text.css({width:o+f,top:n+f,left:e+h+f}),t.$text.find(i.selectors.hintArrow).css({left:s-h+f})},setFadeCoordinates:function(t){var e="on"===a.get("screenAnimation"),n=t.allCoordinates;e?t.$hintFocus.css({left:n.x1+f,top:n.y1+f,width:n.width+f,height:n.height+f}):t.$hintFocus.remove()},getAllCoordinates:function(t){var e,n,r=a.get("remSize",!0),i=u.get("width")/r,o=u.get("height")/r,s=t.coordinates,c=s.width,l=s.height,h=s.x1,f=s.y1;return 0>h&&(h=i+h-c),0>f&&(f=o+f-l),s.hasOwnProperty("width")?e=h+c:(e=s.x2,e=e>=0?e:i+e,c=e-h),s.hasOwnProperty("height")?n=f+l:(n=s.y2,n=n>=0?n:o+n,l=n-f),{x1:h,y1:f,x2:e,y2:n,width:c,height:l,maxWidth:i,maxHeight:o,center:{bottom:{x:h+c/2,y:n}}}},hide:function(t,e){var n=this,i=e||{},o=n.get("submitType"),s=a.get("hint"),u=n.get("name");s[u]=s[u]||{},i.doNotTrack?n.clearOnHides():"normal"===o&&(s[u].state="done",a.set("hint",s)),n.showOutAnimation().then(function(){r.prototype.hide.call(n),n.runOnHides()})},bindEventListeners:function(){},unbindEventListeners:function(){},onHide:function(t,e,n){var r=this,i=r.get("onHides")||[];return i.push({fn:t,args:e,context:n}),r.set("onHides",i),r},runOnHides:function(){var t=this,e=t.get("onHides")||[];o.each(e,function(t){t.fn.apply(t.context,t.args)}),t.set("onHides",null)},clearOnHides:function(){this.set("onHides",null)}}),n={showHint:function(t,n){return n?n.view=new e(t):new e(t)}},l.installTo(n),n.subscribe("showHint",n.showHint),t["/www/js/app/view/core/hint.js"]=n}(),function(){"use strict";var e,n,r=t["/www/js/app/view/core/base.js"]||window.BaseView,i=t["/www/js/lib/jbone.js"]||window.$,o=t["/www/js/lib/lodash.js"]||window._,s=t["/www/js/sound/sound-master.js"]||window.sm,a=t["/www/js/services/template-master.js"]||window.tm,u=t["/www/js/services/info.js"]||window.info,c=t["/www/js/services/mediator.js"]||window.mediator,l=window;e=r.extend({events:{scroll:"stopEvent"},selectors:{popupContainer:".js-popup-container"},initialize:function(t){var e=this,n=e.popupUrl,o=l.location.href;-1===o.indexOf(n)&&e.publish("route-to-popup"),t.hideOnClick&&(e.events.click="hidePopupByRouter"),e.extendFromObj(t),e.setElement(a.get("popup-wrapper")()),t.cssClass&&e.$el.addClass(t.cssClass),r.prototype.initialize.apply(this,arguments),e.render(),e.showInAnimation(),e.bindEventListeners(),e.set("deferred",i.Deferred()),e.subscribe("hide-popup",e.hide)},bindEventListeners:function(){var t,e=this,n=e.get("timeout");n&&(t=setTimeout(function(){e.hidePopupByRouter()},n),e.set("timeoutId",t)),e.bindExtraEvents()},unbindEventListeners:function(){var t=this,e=t.get("timeout");e&&clearTimeout(t.get("timeoutId")),t.unbindExtraEvents()},bindExtraEvents:function(){var t=this,e=t.$el,n=t.get("extraEvents");o.each(n,function(t){e.find(t.selector).on(t.event,t.fn)})},unbindExtraEvents:function(){var t=this,e=t.$el,n=t.get("extraEvents");o.each(n,function(t){e.find(t.selector).off(t.event,t.fn)})},render:function(){var t,e=this,n=e.get("data")||{},r=e.get("sound"),o=i(a.get(e.get("name"))(n)),u=e.$el.find(e.selectors.popupContainer),c=e.get("onShow");r&&s.play(r),u.append(o),e.$wrapper.append(e.$el),c&&(t=c.context||e,t[c.fn].apply(t,c.args))},hide:function(){var t=this;t.showOutAnimation().then(function(){var e,n=t.get("onHide"),i=t.get("deferred");n&&(e=n.context||t,e[n.fn].apply(e,n.args||[])),r.prototype.hide.call(t),i.resolve()})},showInAnimation:function(){var t=this;t.$el.addClass("popup-show-in")},showOutAnimation:function(){var t=this,e=t.$el,n=i.Deferred(),r=u.get("animationEnd",!0);return e.one(r,function(){n.resolve()}),e.addClass("popup-show-out"),n.promise()}}),n={showPopup:function(t,n){return n?n.view=new e(t):new e(t)}},c.installTo(n),n.subscribe("show-popup",n.showPopup),t["/www/js/app/view/core/popup.js"]=n}(),function(){"use strict";var e=t["/www/js/services/mediator.js"]||window.mediator,n=t["/www/js/services/lang.js"]||window.lang,r=window,i=r.applicationCache,o={initialize:function(){var t=this;e.installTo(t),t.bindEventListeners()},getCacheStatus:function(){var t=i;switch(t.status){case t.UNCACHED:return"UNCACHED";case t.IDLE:return"IDLE";case t.CHECKING:return"CHECKING";case t.DOWNLOADING:return"DOWNLOADING";case t.UPDATEREADY:return"UPDATEREADY";case t.OBSOLETE:return"OBSOLETE";default:return"UKNOWN CACHE STATUS"}},bindEventListeners:function(){var t=this;t.subscribe("app-cache:check-cache",t.checkCache),i.addEventListener("updateready",function(e){t.checkCache()},!1)},checkCache:function(){var t=this;"UPDATEREADY"===t.getCacheStatus()&&e.publish("show-popup",{name:"new-version-is-available",extraEvents:[{selector:".js-update-cache",event:"click",fn:function(){i.swapCache(),r.location.reload()}}],data:{lang:n}})}};r.addEventListener("load",function(){o.initialize()},!1),t["/www/js/services/app-cache.js"]=o}(),function(){"use strict";var e=t["/www/js/services/info.js"]||window.info;e.set("dev-mode",!0);var n=(t["/www/js/services/log.js"]||window.log,t["/www/js/services/mediator.js"]||window.mediator,t["/www/js/lib/polyfill-class-list.js"]||window.polyfillClassList,t["/www/js/lib/shim.js"]||window.shim,t["/www/js/lib/shim-es5.js"]||window.shimES5,t["/www/js/lib/sham-es5.js"]||window.shamES5,t["/www/js/lib/lodash.js"]||window._,t["/www/js/lib/jbone.js"]||window.$),r=t["/www/js/lib/deferred.js"]||window.Deferred,i=t["/www/js/lib/backbone.js"]||window.Backbone,o=(t["/www/js/lib/fastclick.js"]||window.fastclick,t["/www/js/lib/dot.js"]||window.doT,t["/www/js/lib/queue.js"]||window.Queue,t["/www/js/services/device.js"]||window.device,t["/www/js/services/android-ads.js"]||window.androidAds,t["/www/js/services/lang.js"]||window.lang,t["/www/js/services/template-master.js"]||window.tm,t["/www/js/services/util.js"]||window.util,t["/www/js/sound/sound-master.js"]||window.sm,t["/www/js/app/router/router.js"]||window.router,t["/www/js/app/view/core/base.js"]||window.BaseView);t["/www/js/app/view/core/hint.js"]||window.hintMaster,t["/www/js/app/view/core/popup.js"]||window.popupMaster,t["/www/js/services/app-cache.js"]||window.appCache;new FastClick(window.document.body),function s(){var t=window;return t.location.hash?(t.history.back(),t.setTimeout(s,50)):(r.installInto(n),t.$=t.jQuery=t.jquery=n,o.prototype.initStatic(),void i.history.start())}()}()}({});